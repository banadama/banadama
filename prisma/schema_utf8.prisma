// Prisma Schema - Banadama MVP
// Complete implementation with all models for B2B marketplace

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ============================================
// ENUMS
// ============================================

enum Role {
  BUYER
  SUPPLIER      // Consolidated FACTORY + WHOLESALER
  FACTORY       // Legacy - maps to SUPPLIER
  WHOLESALER    // Legacy - maps to SUPPLIER
  CREATOR
  OPS
  AFFILIATE
  ADMIN
}

enum SupplierType {
  FACTORY
  WHOLESALER
}

enum CreatorType {
  // Digital Creators (Global)
  GRAPHIC_DESIGNER
  MOCK_DESIGNER
  AI_AGENT_DEV
  
  // Local Service Creators (NG/BD only)
  MODELLING
  PHOTOGRAPHER
  VIDEOGRAPHER
}

enum CreatorListingType {
  DIGITAL
  LOCAL_SERVICE
}

enum CreatorPriceType {
  FIXED
  STARTING_FROM
  QUOTED
}

enum CreatorOrderStatus {
  PENDING
  PAID_ESCROW
  IN_PROGRESS
  DELIVERED
  CONFIRMED
  CANCELLED
  DISPUTED
}

enum VerificationType {
  USER_KYC       // Basic ID verification
  SUPPLIER       // Factory/Wholesaler business verification
  CREATOR        // Creator portfolio verification
}

enum VerificationStatus {
  PENDING
  UNDER_REVIEW
  APPROVED
  REJECTED
}

enum ServiceTier {
  BASIC
  PREMIUM
  BUSINESS
}

enum RequestStatus {
  PENDING       // Waiting for Ops assignment
  QUOTED        // Quote generated by Ops
  APPROVED      // Buyer accepted quote
  REJECTED      // Buyer rejected or cancelled
}

enum OrderStatus {
  PENDING       // Order created, awaiting payment
  PAID          // Payment received, funds in escrow
  PROCESSING    // Supplier working on it
  SHIPPED       // In transit
  DELIVERED     // Buyer received
  CANCELLED     // Cancelled before fulfillment
}

enum WalletStatus {
  ACTIVE
  FROZEN
  RESTRICTED
}

enum TransactionType {
  DEPOSIT
  WITHDRAWAL
  PAYMENT_ESCROW    // Lock funds on order
  PAYMENT_RELEASE   // Release to supplier on delivery
  REFUND
  COMMISSION        // Affiliate commission
  SUBSCRIPTION_FEE  // Service plan fee
}

enum TransactionStatus {
  PENDING
  COMPLETED
  FAILED
  CANCELLED
}

enum PayoutStatus {
  PENDING
  APPROVED
  PROCESSING
  PAID
  REJECTED
}

enum ConversionType {
  SIGNUP              // Not used in sales-only model
  SALE                // Sales commission
  VERIFIED_SUPPLIER   // Supplier referral bonus
}

enum MessageStatus {
  SENT
  DELIVERED
  READ
}

enum ConversationType {
  BUYER_OPS
  SUPPLIER_OPS
  CREATOR_OPS
}

// ============================================
// MULTI-ACCOUNT SYSTEM ENUMS
// ============================================

enum AccountType {
  BUYER
  COMPANY_FACTORY
  COMPANY_WHOLESALER
  COMPANY_RETAIL
  CREATOR_MODEL
  CREATOR_GRAPHIC
  CREATOR_MOCK
}

enum UserStatus {
  ACTIVE
  SUSPENDED
  PENDING
}

enum VerificationLevel {
  NONE
  BLUE   // Verified identity (buyers, creators)
  GREEN  // Verified business (factories, wholesalers, strong retailers)
  GOLD   // Reserved for future use
}

enum MembershipRole {
  OWNER
  STAFF
}

// ============================================
// PRODUCT & LISTING CONTROL ENUMS
// ============================================

enum ProductApprovalStatus {
  PENDING      // Awaiting admin approval
  APPROVED     // Approved by admin
  REJECTED     // Rejected by admin
  CHANGES_REQUIRED // Requires seller changes
}

// ============================================
// DISPUTE & RESOLUTION ENUMS
// ============================================

enum DisputeStatus {
  OPEN
  INVESTIGATING
  RESOLVED_BUYER_FAVOR
  RESOLVED_SUPPLIER_FAVOR
  RESOLVED_PARTIAL
  CLOSED
}

enum DisputeType {
  NON_DELIVERY
  QUALITY_ISSUE
  WRONG_ITEM
  PRICING_DISPUTE
  SHIPPING_DAMAGE
  OTHER
}

enum DisputeResolutionType {
  FULL_REFUND
  PARTIAL_REFUND
  REPLACEMENT
  CREDIT
  NO_ACTION
  OTHER
}

// ============================================
// ADMIN ROLE HIERARCHY ENUMS
// ============================================

enum AdminRoleType {
  SUPER_ADMIN    // Full access to everything
  OPS_ADMIN      // Operations, disputes, verifications
  CONTENT_ADMIN  // Products, categories, CMS
  FINANCE_ADMIN  // Payouts, fees, commissions
  SUPPORT_ADMIN  // User support, basic access
}

// ============================================
// FINANCE MODE ENUMS
// ============================================

enum EscrowStatus {
  PENDING        // Awaiting payment
  LOCKED         // Funds locked, awaiting delivery
  PARTIAL_RELEASE // Part released, part held
  RELEASED       // Fully released to supplier
  REFUNDED       // Returned to buyer
  DISPUTED       // Under dispute review
}

enum PayoutApprovalStatus {
  PENDING_VERIFICATION  // Delivery not yet confirmed
  PENDING_APPROVAL      // Awaiting Finance approval
  APPROVED              // Finance approved
  PROCESSING            // Payout in progress
  COMPLETED             // Paid out
  REJECTED              // Finance rejected
  ON_HOLD               // Held by Finance
}

enum RefundStatus {
  REQUESTED      // Buyer requested
  PENDING_REVIEW // Under review
  APPROVED       // Finance approved
  PROCESSING     // Refund in progress
  COMPLETED      // Refunded
  REJECTED       // Denied
}

enum LedgerEntryType {
  DEPOSIT             // Money in
  WITHDRAWAL          // Money out
  ESCROW_LOCK         // Lock for order
  ESCROW_RELEASE      // Release to supplier
  ESCROW_REFUND       // Return to buyer
  PLATFORM_FEE        // Platform commission
  PAYOUT              // Supplier payout
  ADJUSTMENT          // Manual adjustment
}

// ============================================
// CORE USER MODELS
// ============================================

model User {
  id           String     @id @default(cuid())
  email        String     @unique
  phone        String?    @unique
  passwordHash String?    // For users with password auth
  role         Role
  status       UserStatus @default(ACTIVE)
  country      String?    // ISO code: "NG", "BD", etc.
  isActive     Boolean    @default(true)
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt

  // Profile relations (one-to-one)
  buyerProfile      BuyerProfile?
  supplierProfile   SupplierProfile?
  creatorProfile    CreatorProfile?
  affiliateProfile  AffiliateProfile?
  
  // Multi-Account System
  accounts          AccountMembership[]
  activeAccountId   String?    // Currently active account ID
  
  // Wallet
  wallet            Wallet?
  
  // Verification
  verificationRequests  VerificationRequest[]
  reviewedVerifications VerificationRequest[] @relation("VerificationReviewedBy")
  
  // Messaging
  sentMessages      Message[] @relation("MessageSender")
  conversations     ConversationParticipant[]
  
  // Admin
  adminActionsPerformed AdminAuditLog[] @relation("AdminUser")
  adminActionsReceived  AdminAuditLog[] @relation("TargetUser")
  
  // Feature flags and site settings updated by this admin
  featureFlagsUpdated   FeatureFlag[]  @relation("FeatureFlagUpdatedBy")
  siteSettingsUpdated   SiteSetting[]  @relation("SiteSettingUpdatedBy")
  accountsVerified      Account[]      @relation("AccountVerifiedBy")
  
  // Sessions
  sessions          UserSession[]
  
  // Creator Orders
  creatorOrders     CreatorOrder[] @relation("BuyerCreatorOrders")
}

// ============================================
// MULTI-ACCOUNT SYSTEM MODELS
// ============================================

model Account {
  id                 String            @id @default(cuid())
  type               AccountType
  name               String            // Company name or profile name
  country            String            // ISO: "NG", "BD"
  
  // Verification
  verificationLevel  VerificationLevel @default(NONE)
  verifiedAt         DateTime?
  verifiedByAdminId  String?
  verifiedByAdmin    User?             @relation("AccountVerifiedBy", fields: [verifiedByAdminId], references: [id])
  verificationNotes  String?
  
  // Status
  isActive           Boolean           @default(true)
  
  // ========================================
  // ACCOUNT FREEZE & LIMIT CONTROLS
  // ========================================
  isFrozen           Boolean           @default(false)
  frozenAt           DateTime?
  frozenByAdminId    String?
  freezeReason       String?
  
  // Granular action limits (when account is limited but not fully frozen)
  canCreateOrders    Boolean           @default(true)
  canRespondToRfq    Boolean           @default(true)
  canWithdraw        Boolean           @default(true)
  canListProducts    Boolean           @default(true)
  
  // Limit notes for admin reference
  limitNotes         String?
  limitExpiresAt     DateTime?         // Auto-expire limits
  
  // Profile data (JSON for flexibility)
  profileData        Json?
  
  // Relations
  memberships        AccountMembership[]
  
  createdAt          DateTime          @default(now())
  updatedAt          DateTime          @updatedAt
  
  @@index([type])
  @@index([country])
  @@index([verificationLevel])
  @@index([isActive])
  @@index([isFrozen])
}

model AccountMembership {
  id        String         @id @default(cuid())
  userId    String
  user      User           @relation(fields: [userId], references: [id], onDelete: Cascade)
  accountId String
  account   Account        @relation(fields: [accountId], references: [id], onDelete: Cascade)
  role      MembershipRole @default(STAFF)
  
  // When the user joined this account
  joinedAt  DateTime       @default(now())
  
  @@unique([userId, accountId])
  @@index([userId])
  @@index([accountId])
}

model SiteSetting {
  id              String   @id @default(cuid())
  key             String   @unique
  value           Json     // Can store string, number, object, array
  category        String?  // Group settings: "platform", "fees", "countries"
  description     String?
  
  updatedByAdminId String?
  updatedByAdmin   User?   @relation("SiteSettingUpdatedBy", fields: [updatedByAdminId], references: [id])
  
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  
  @@index([key])
  @@index([category])
}

// ============================================
// DISPUTE & RESOLUTION MODEL
// ============================================

model Dispute {
  id             String               @id @default(cuid())
  orderId        String
  
  // Parties involved
  buyerId        String
  supplierId     String
  
  // Dispute details
  type           DisputeType
  status         DisputeStatus        @default(OPEN)
  description    String
  evidence       Json?                // URLs, notes, documents
  
  // Resolution
  resolutionType DisputeResolutionType?
  resolutionNotes String?
  resolvedAt     DateTime?
  resolvedByAdminId String?
  
  // Financial outcome
  refundAmount   Int?                 // Amount refunded (in kobo)
  supplierPenalty Int?                // Penalty charged to supplier (in kobo)
  buyerCredit    Int?                 // Credit given to buyer (in kobo)
  
  // Admin notes (internal)
  internalNotes  String?
  
  createdAt      DateTime             @default(now())
  updatedAt      DateTime             @updatedAt
  
  @@index([orderId])
  @@index([buyerId])
  @@index([supplierId])
  @@index([status])
  @@index([type])
}

// ============================================
// PRICING & COMMISSION RULES MODEL
// ============================================

model PricingRule {
  id             String   @id @default(cuid())
  
  // Scope (which orders/products this applies to)
  scope          String   // "global", "category", "country", "account"
  scopeValue     String?  // e.g., "fashion-fabrics", "NG", accountId
  
  // Rule type
  ruleType       String   // "platform_fee", "buyer_fee", "supplier_fee", "commission"
  
  // Fee configuration
  feeType        String   // "percentage" or "fixed"
  feeValue       Float    // Percentage (e.g., 5.0 for 5%) or fixed amount (in kobo)
  
  // Thresholds
  minOrderValue  Int?     // Minimum order value for this rule to apply (kobo)
  maxOrderValue  Int?     // Maximum order value for this rule to apply (kobo)
  
  // Status
  isActive       Boolean  @default(true)
  priority       Int      @default(0) // Higher priority rules override lower ones
  
  // Admin tracking
  createdByAdminId String?
  
  // Notes
  description    String?
  
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
  
  @@index([scope, scopeValue])
  @@index([ruleType])
  @@index([isActive])
}

// ============================================
// ADMIN ROLE & PERMISSION MODEL
// ============================================

model AdminRole {
  id             String        @id @default(cuid())
  userId         String        @unique
  
  // Role type
  roleType       AdminRoleType @default(SUPPORT_ADMIN)
  
  // Granular permissions (JSON for flexibility)
  permissions    Json?         // e.g., { "canManageUsers": true, "canManageDisputes": true }
  
  // Restrictions
  restrictedTo   Json?         // e.g., { "countries": ["NG"], "categories": ["fashion"] }
  
  // Admin tracking
  assignedByAdminId String?
  assignedAt     DateTime      @default(now())
  
  // Notes
  notes          String?
  
  createdAt      DateTime      @default(now())
  updatedAt      DateTime      @updatedAt
  
  @@index([roleType])
}

// ============================================
// MARKET CONTROL MODEL
// ============================================

model MarketControl {
  id             String   @id @default(cuid())
  
  // What is being controlled
  controlType    String   // "country", "category", "feature"
  targetValue    String   // "NG", "fashion-fabrics", "rfq", "buy_now"
  
  // Control settings
  isEnabled      Boolean  @default(true)
  isPaused       Boolean  @default(false)
  pauseReason    String?
  pausedAt       DateTime?
  pausedByAdminId String?
  
  // Schedule (for planned changes)
  scheduledEnableAt  DateTime?
  scheduledDisableAt DateTime?
  
  // Restrictions within this market
  restrictions   Json?    // e.g., { "maxOrderValue": 1000000, "requiresApproval": true }
  
  // Admin notes
  notes          String?
  
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
  
  @@unique([controlType, targetValue])
  @@index([controlType])
  @@index([isEnabled])
  @@index([isPaused])
}

// ============================================
// PROFILE MODELS
// ============================================
model BuyerProfile {
  id     String @id @default(cuid())
  userId String @unique
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  // Buyer details
  companyName       String?
  phoneNumber       String?
  defaultAddress    String?
  defaultCity       String?
  defaultCountry    String?
  
  // Relations
  requests          Request[]
  orders            Order[]
  subscription      Subscription?
  pricingOverrides  PricingOverride[]
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model SupplierProfile {
  id     String @id @default(cuid())
  userId String @unique
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  // Supplier details
  businessName   String?
  type           SupplierType @default(FACTORY)
  phoneNumber    String?
  address        String?
  city           String?
  
  // Verification
  isVerified     Boolean @default(false)
  verifiedAt     DateTime?
  
  // Relations
  products       Product[]
  requests       Request[]  // Assigned RFQs
  orders         Order[]
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model CreatorProfile {
  id              String       @id @default(cuid())
  userId          String       @unique
  user            User         @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  displayName     String?
  bio             String?
  country         String?      // ISO code: NG, BD
  state           String?
  city            String?
  skills          Json         @default("[]") // skills as per prompt
  verificationTick VerificationLevel @default(NONE)
  
  // Relations
  listings        CreatorListing[]
  orders          CreatorOrder[]
  
  createdAt       DateTime     @default(now())
  updatedAt       DateTime     @updatedAt
  
  // Legacy fields
  products        Product[]    
  jobs            CreatorJob[] 
}

model CreatorListing {
  id               String            @id @default(cuid())
  creatorId        String
  creator          CreatorProfile    @relation(fields: [creatorId], references: [id], onDelete: Cascade)
  
  type             CreatorListingType
  category         String            // categories from prompt
  
  title            String
  description      String?
  media            Json              @default("[]") // portfolio images/videos
  priceType        CreatorPriceType  @default(FIXED)
  currency         String            @default("USD")
  price            Float?
  
  country          String?           // required if LOCAL_SERVICE
  state            String?
  city             String?
  
  status           String            @default("ACTIVE") // DRAFT, ACTIVE, PAUSED, ARCHIVED
  
  orders           CreatorOrder[]
  
  createdAt        DateTime          @default(now())
  updatedAt        DateTime          @updatedAt
  
  @@index([type])
  @@index([status])
}

model CreatorOrder {
  id                String            @id @default(cuid())
  buyerUserId       String
  buyer             User              @relation("BuyerCreatorOrders", fields: [buyerUserId], references: [id])
  
  creatorId         String
  creator           CreatorProfile    @relation(fields: [creatorId], references: [id])
  
  listingId         String
  listing           CreatorListing    @relation(fields: [listingId], references: [id])
  
  type              CreatorListingType
  status            CreatorOrderStatus @default(PENDING)
  
  subtotal          Float             @default(0)
  fees              Float             @default(0)
  total             Float             @default(0)
  currency          String            @default("USD")
  
  escrowId          String?
  threadId          String?
  
  serviceDate       DateTime?         // local booking date/time
  location          Json              @default("{}") // for local job address details
  
  deliveries        CreatorDelivery[]
  
  createdAt         DateTime          @default(now())
  updatedAt         DateTime          @updatedAt
  
  @@index([creatorId])
  @@index([buyerUserId])
  @@index([status])
}

model CreatorDelivery {
  id              String       @id @default(cuid())
  orderId         String
  order           CreatorOrder @relation(fields: [orderId], references: [id], onDelete: Cascade)
  
  message         String?
  files           Json         @default("[]")
  deliveredAt     DateTime     @default(now())
}

model AffiliateProfile {
  id          String            @id @default(cuid())
  user        User              @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId      String            @unique
  
  // Affiliate details
  displayName String?
  bio         String?
  
  // Stats
  totalClicks      Int @default(0)
  totalSignups     Int @default(0) // Not used in sales-only model
  totalSales       Int @default(0)
  totalEarnings    Int @default(0)  // in kobo/smallest unit
  
  // Relations
  links       AffiliateLink[]
  conversions AffiliateConversion[]
  payouts     AffiliatePayout[]
  
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

// ============================================
// PRODUCT & REQUEST MODELS
// ============================================

model Product {
  id          String @id @default(cuid())
  
  // Basic info
  name        String
  description String?
  categorySlug String?
  categoryName String?
  
  // Pricing
  unitPrice   Float
  moq         Int?           // Minimum Order Quantity
  
  // Inventory
  stockQuantity Int?
  
  // Metadata
  countryOfOrigin String?
  images      String[]       @default([])
  
  // Owner (supplier or creator)
  supplierId  String?
  supplier    SupplierProfile? @relation(fields: [supplierId], references: [id], onDelete: Cascade)
  creatorId   String?
  creator     CreatorProfile? @relation(fields: [creatorId], references: [id], onDelete: Cascade)
  
  // Settings
  allowRfq        Boolean @default(true)
  allowBuyNow     Boolean @default(true)
  allowGroupBuy   Boolean @default(false)
  isActive        Boolean @default(true)
  
  // ========================================
  // ADMIN PRODUCT CONTROLS
  // ========================================
  approvalStatus     ProductApprovalStatus @default(PENDING)
  approvedAt         DateTime?
  approvedByAdminId  String?
  rejectionReason    String?
  
  // Admin visibility control
  isHiddenByAdmin    Boolean @default(false)
  hiddenReason       String?
  hiddenAt           DateTime?
  hiddenByAdminId    String?
  
  // Flagging for misleading content
  isFlagged          Boolean @default(false)
  flagReason         String?
  flaggedAt          DateTime?
  flaggedByAdminId   String?
  
  // Price change tracking (requires approval if enabled)
  priceChangeRequiresApproval Boolean @default(false)
  lastApprovedPrice  Float?
  
  // Relations
  requests    Request[]
  orders      Order[]
  
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  @@index([supplierId])
  @@index([creatorId])
  @@index([categorySlug])
  @@index([approvalStatus])
  @@index([isHiddenByAdmin])
  @@index([isFlagged])
}

model Request {
  id               String      @id @default(cuid())
  
  // Buyer
  buyer            BuyerProfile @relation(fields: [buyerId], references: [id])
  buyerId          String
  
  // Product reference (optional - can create RFQ without specific product)
  product          Product? @relation(fields: [productId], references: [id])
  productId        String?
  productName      String    // Even if no product, we need the name
  
  // Request details
  quantity         Int
  targetPrice      Float?    // Buyer's target price per unit
  description      String?
  specifications   String?   // JSON or text
  
  // Category for pricing calculations
  categorySlug     String?
  
  // Delivery
  deliveryAddress  String
  deliveryCity     String?
  deliveryCountry  String @default("NG")
  
  // Service tier
  serviceTier      ServiceTier @default(BASIC)
  
  // Ops assignment
  supplierId       String?
  supplier         SupplierProfile? @relation(fields: [supplierId], references: [id])
  
  // Quote
  quotedPrice      Float?    // Unit price quoted by Ops
  estimatedPricing Json?     // Full pricing breakdown from pricing engine
  estimatedTotal   Float?    // Grand total
  
  // Status
  status           RequestStatus @default(PENDING)
  
  // Relations
  orders           Order[]
  
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  
  @@index([buyerId])
  @@index([supplierId])
  @@index([status])
}

model Order {
  id               String   @id @default(cuid())
  
  // Relations
  request          Request?  @relation(fields: [requestId], references: [id])
  requestId        String?
  
  buyer            BuyerProfile @relation(fields: [buyerId], references: [id])
  buyerId          String
  
  supplier         SupplierProfile @relation(fields: [supplierId], references: [id])
  supplierId       String
  
  product          Product? @relation(fields: [productId], references: [id])
  productId        String?
  productName      String
  
  // Order details
  quantity         Int
  totalPrice       Float
  currency         String       @default("NGN")
  pricingSnapshot  Json?        // Final pricing breakdown
  
  // Delivery
  deliveryAddress  String
  deliveryCity     String?
  deliveryCountry  String @default("NG")
  
  // Tracking
  trackingNumber   String?
  shippedAt        DateTime?
  deliveredAt      DateTime?
  confirmedAt      DateTime?    // When buyer confirms delivery
  
  // Status
  status           OrderStatus  @default(PENDING)
  
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  
  @@index([buyerId])
  @@index([supplierId])
  @@index([status])
}

// ============================================
// WALLET & TRANSACTIONS
// ============================================

model Wallet {
  id            String       @id @default(cuid())
  userId        String       @unique
  user          User         @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  balance       Int          @default(0) // Available balance (in kobo)
  lockedBalance Int          @default(0) // In escrow
  currency      String       @default("NGN")
  status        WalletStatus @default(ACTIVE)

  transactions  Transaction[]

  createdAt     DateTime     @default(now())
  updatedAt     DateTime     @updatedAt
}

model Transaction {
  id          String            @id @default(cuid())
  walletId    String
  wallet      Wallet            @relation(fields: [walletId], references: [id], onDelete: Cascade)
  
  amount      Int               // In kobo (can be negative)
  type        TransactionType
  status      TransactionStatus @default(PENDING)
  reference   String?           // External ref or order ID
  description String?
  metadata    Json?

  createdAt   DateTime          @default(now())
  updatedAt   DateTime          @updatedAt

  @@index([walletId])
  @@index([type])
  @@index([status])
  @@index([reference])
}

// ============================================
// CREATOR JOBS (Local Service Creators)
// ============================================

model CreatorJob {
  id          String   @id @default(cuid())
  
  creator     CreatorProfile @relation(fields: [creatorId], references: [id], onDelete: Cascade)
  creatorId   String
  
  // Job details
  title       String
  description String
  clientName  String?
  location    String
  
  // Schedule
  scheduledDate DateTime
  duration      Int?     // In hours
  
  // Payment
  payment     Int      // In kobo
  
  // Status
  status      String   @default("PENDING") // PENDING, CONFIRMED, COMPLETED, CANCELLED
  
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  @@index([creatorId])
  @@index([status])
}

// ============================================
// MESSAGING / CHAT SYSTEM
// ============================================

model Conversation {
  id              String   @id @default(cuid())
  
  type            ConversationType
  title           String?
  
  // Participants
  participants    ConversationParticipant[]
  messages        Message[]
  
  // Metadata
  isActive        Boolean  @default(true)
  lastMessageAt   DateTime?
  
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  
  @@index([type])
  @@index([isActive])
}

model ConversationParticipant {
  id              String   @id @default(cuid())
  
  conversation    Conversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)
  conversationId  String
  
  user            User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId          String
  
  // Read tracking
  lastReadAt      DateTime?
  unreadCount     Int      @default(0)
  
  joinedAt        DateTime @default(now())
  
  @@unique([conversationId, userId])
  @@index([userId])
}

model Message {
  id              String   @id @default(cuid())
  
  conversation    Conversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)
  conversationId  String
  
  sender          User     @relation("MessageSender", fields: [senderId], references: [id])
  senderId        String
  
  content         String
  attachments     String[] @default([])
  
  status          MessageStatus @default(SENT)
  
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  
  @@index([conversationId])
  @@index([senderId])
  @@index([createdAt])
}

// ============================================
// AFFILIATE SYSTEM
// ============================================

model AffiliateLink {
  id          String   @id @default(cuid())
  
  affiliate   AffiliateProfile @relation(fields: [affiliateId], references: [id], onDelete: Cascade)
  affiliateId String
  
  slug        String   @unique
  targetUrl   String
  campaign    String?
  
  clicks      Int      @default(0)
  signups     Int      @default(0) // Not used
  sales       Int      @default(0)
  
  clickRecords AffiliateClick[]
  conversions  AffiliateConversion[]
  
  active      Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  @@index([affiliateId])
  @@index([slug])
}

model AffiliateClick {
  id          String   @id @default(cuid())
  
  link        AffiliateLink @relation(fields: [linkId], references: [id], onDelete: Cascade)
  linkId      String
  
  ipAddress   String?
  userAgent   String?
  referer     String?
  country     String?
  
  clickedAt   DateTime @default(now())
  
  @@index([linkId])
  @@index([clickedAt])
}

model AffiliateConversion {
  id          String   @id @default(cuid())
  
  affiliate   AffiliateProfile @relation(fields: [affiliateId], references: [id], onDelete: Cascade)
  affiliateId String
  
  link        AffiliateLink @relation(fields: [linkId], references: [id], onDelete: Cascade)
  linkId      String
  
  type        ConversionType   // SALE, VERIFIED_SUPPLIER (no SIGNUP)
  
  userId      String?
  orderId     String?
  supplierId  String?
  
  commissionAmount Int
  commissionRate   Float?
  currency         String @default("NGN")
  
  paid        Boolean  @default(false)
  paidAt      DateTime?
  
  createdAt   DateTime @default(now())
  
  @@index([affiliateId])
  @@index([linkId])
  @@index([type])
  @@index([paid])
}

model AffiliatePayout {
  id          String   @id @default(cuid())
  
  affiliate   AffiliateProfile @relation(fields: [affiliateId], references: [id], onDelete: Cascade)
  affiliateId String
  
  amount      Int
  currency    String @default("NGN")
  status      PayoutStatus @default(PENDING)
  
  paymentMethod String?
  accountDetails Json?
  
  requestedAt DateTime @default(now())
  approvedAt  DateTime?
  paidAt      DateTime?
  rejectedAt  DateTime?
  rejectionReason String?
  
  transactionRef String?
  notes       String?
  
  @@index([affiliateId])
  @@index([status])
  @@index([requestedAt])
}

// ============================================
// VERIFICATION SYSTEM
// ============================================

model VerificationRequest {
  id              String             @id @default(cuid())
  userId          String
  user            User               @relation(fields: [userId], references: [id], onDelete: Cascade)

  type            VerificationType
  status          VerificationStatus @default(PENDING)

  supplierId      String?
  creatorId       String?

  data            Json?
  documentUrls    String[]           @default([])

  reviewedById    String?
  reviewedBy      User?              @relation("VerificationReviewedBy", fields: [reviewedById], references: [id])
  reviewedAt      DateTime?
  rejectionReason String?

  createdAt       DateTime           @default(now())
  updatedAt       DateTime           @updatedAt

  @@index([type, status])
  @@index([userId])
}

// ============================================
// SERVICE PLANS & SUBSCRIPTIONS
// ============================================

model ServicePlan {
  id          String      @id @default(cuid())
  tier        ServiceTier @unique
  name        String
  price       Int         // In kobo
  description String
  features    String[]    @default([])
  
  subscriptions Subscription[]
  
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Subscription {
  id        String      @id @default(cuid())
  buyerId   String      @unique
  buyer     BuyerProfile @relation(fields: [buyerId], references: [id], onDelete: Cascade)
  
  planId    String
  plan      ServicePlan @relation(fields: [planId], references: [id])
  
  active    Boolean     @default(true)
  startDate DateTime    @default(now())
  endDate   DateTime?
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  @@index([buyerId])
  @@index([active])
}

// ============================================
// ADMIN SYSTEM
// ============================================

model AdminAuditLog {
  id          String   @id @default(cuid())
  
  admin       User     @relation("AdminUser", fields: [adminId], references: [id])
  adminId     String
  
  action      String
  
  targetType  String
  targetId    String
  targetUser  User?    @relation("TargetUser", fields: [targetUserId], references: [id])
  targetUserId String?
  
  before      Json?
  after       Json?
  metadata    Json?
  
  ipAddress   String?
  userAgent   String?
  
  createdAt   DateTime @default(now())
  
  @@index([adminId])
  @@index([targetType, targetId])
  @@index([action])
  @@index([createdAt])
}

model SystemConfig {
  id          String   @id @default(cuid())
  
  key         String   @unique
  value       Json
  category    String
  description String?
  
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  @@index([category])
  @@index([key])
}

model PricingOverride {
  id          String   @id @default(cuid())
  
  buyer       BuyerProfile? @relation(fields: [buyerId], references: [id], onDelete: Cascade)
  buyerId     String?
  segment     String?
  
  overrideType String
  
  serviceFee      Int?
  fulfillmentRate Float?
  dutyMargin      Float?
  
  minOrderValue   Int?
  maxOrderValue   Int?
  category        String?
  region          String?
  
  reason      String?
  isActive    Boolean  @default(true)
  expiresAt   DateTime?
  
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  @@index([buyerId])
  @@index([segment])
  @@index([isActive])
}

model FeatureFlag {
  id          String   @id @default(cuid())
  
  key         String   @unique
  enabled     Boolean  @default(false)
  
  rolloutPercentage Int @default(0)
  allowedRoles      String[]
  
  name        String
  description String?
  category    String?
  
  // Track who updated this flag
  updatedByAdminId String?
  updatedByAdmin   User?   @relation("FeatureFlagUpdatedBy", fields: [updatedByAdminId], references: [id])
  
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  @@index([key])
  @@index([enabled])
}

model UserSession {
  id          String   @id @default(cuid())
  
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId      String
  
  token       String   @unique
  ipAddress   String?
  userAgent   String?
  device      String?
  location    String?
  
  isActive    Boolean  @default(true)
  lastActivity DateTime @default(now())
  expiresAt   DateTime
  
  createdAt   DateTime @default(now())
  
  @@index([userId])
  @@index([token])
  @@index([isActive])
  @@index([expiresAt])
}

 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 / /   F I N A N C E   M O D E   M O D E L S 
 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 
 
 m o d e l   A c c o u n t W a l l e t   { 
 
     i d                           S t r i n g               @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     a c c o u n t                 A c c o u n t             @ r e l a t i o n ( f i e l d s :   [ a c c o u n t I d ] ,   r e f e r e n c e s :   [ i d ] ,   o n D e l e t e :   C a s c a d e ) 
 
     a c c o u n t I d             S t r i n g               @ u n i q u e 
 
     
 
     / /   B a l a n c e s   ( s t o r e d   i n   k o b o / s m a l l e s t   u n i t ) 
 
     a v a i l a b l e B a l a n c e     I n t               @ d e f a u l t ( 0 ) 
 
     l o c k e d B a l a n c e           I n t               @ d e f a u l t ( 0 )     / /   I n   e s c r o w 
 
     p e n d i n g B a l a n c e         I n t               @ d e f a u l t ( 0 )     / /   P e n d i n g   p a y o u t s 
 
     
 
     / /   W a l l e t   s t a t u s 
 
     s t a t u s                   W a l l e t S t a t u s   @ d e f a u l t ( A C T I V E ) 
 
     f r o z e n A t               D a t e T i m e ? 
 
     f r o z e n R e a s o n       S t r i n g ? 
 
     f r o z e n B y A d m i n I d   S t r i n g ? 
 
     
 
     / /   A u d i t 
 
     c r e a t e d A t             D a t e T i m e           @ d e f a u l t ( n o w ( ) ) 
 
     u p d a t e d A t             D a t e T i m e           @ u p d a t e d A t 
 
     
 
     / /   R e l a t i o n s 
 
     l e d g e r E n t r i e s     L e d g e r E n t r y [ ] 
 
     
 
     @ @ i n d e x ( [ a c c o u n t I d ] ) 
 
     @ @ i n d e x ( [ s t a t u s ] ) 
 
 } 
 
 
 
 m o d e l   P l a t f o r m W a l l e t   { 
 
     i d                           S t r i n g               @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     w a l l e t T y p e           S t r i n g               @ u n i q u e     / /   " M A I N " ,   " F E E S " ,   " E S C R O W _ P O O L " 
 
     
 
     b a l a n c e                 I n t                     @ d e f a u l t ( 0 ) 
 
     
 
     d e s c r i p t i o n         S t r i n g ? 
 
     
 
     c r e a t e d A t             D a t e T i m e           @ d e f a u l t ( n o w ( ) ) 
 
     u p d a t e d A t             D a t e T i m e           @ u p d a t e d A t 
 
 } 
 
 
 
 m o d e l   L e d g e r E n t r y   { 
 
     i d                           S t r i n g                       @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     w a l l e t                   A c c o u n t W a l l e t         @ r e l a t i o n ( f i e l d s :   [ w a l l e t I d ] ,   r e f e r e n c e s :   [ i d ] ,   o n D e l e t e :   C a s c a d e ) 
 
     w a l l e t I d               S t r i n g 
 
     
 
     t y p e                       L e d g e r E n t r y T y p e 
 
     
 
     / /   A m o u n t s   ( p o s i t i v e   f o r   c r e d i t ,   n e g a t i v e   f o r   d e b i t ) 
 
     a m o u n t                   I n t 
 
     b a l a n c e B e f o r e     I n t 
 
     b a l a n c e A f t e r       I n t 
 
     
 
     / /   R e f e r e n c e 
 
     r e f e r e n c e T y p e     S t r i n g ?                     / /   " O R D E R " ,   " E S C R O W " ,   " P A Y O U T " ,   " R E F U N D " 
 
     r e f e r e n c e I d         S t r i n g ? 
 
     
 
     d e s c r i p t i o n         S t r i n g ? 
 
     m e t a d a t a               J s o n ? 
 
     
 
     / /   A u d i t 
 
     c r e a t e d B y A d m i n I d   S t r i n g ? 
 
     c r e a t e d B y R e a s o n     S t r i n g ?                 / /   R e q u i r e d   f o r   a d j u s t m e n t s 
 
     
 
     c r e a t e d A t             D a t e T i m e                   @ d e f a u l t ( n o w ( ) ) 
 
     
 
     @ @ i n d e x ( [ w a l l e t I d ] ) 
 
     @ @ i n d e x ( [ t y p e ] ) 
 
     @ @ i n d e x ( [ r e f e r e n c e T y p e ,   r e f e r e n c e I d ] ) 
 
     @ @ i n d e x ( [ c r e a t e d A t ] ) 
 
 } 
 
 
 
 m o d e l   E s c r o w   { 
 
     i d                           S t r i n g                   @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     o r d e r                     O r d e r                     @ r e l a t i o n ( f i e l d s :   [ o r d e r I d ] ,   r e f e r e n c e s :   [ i d ] ) 
 
     o r d e r I d                 S t r i n g                   @ u n i q u e 
 
     
 
     b u y e r A c c o u n t I d       S t r i n g 
 
     s u p p l i e r A c c o u n t I d   S t r i n g 
 
     
 
     / /   A m o u n t s   ( s t o r e d   i n   k o b o ) 
 
     t o t a l A m o u n t             I n t                       / /   T o t a l   l o c k e d 
 
     r e l e a s e d A m o u n t       I n t                       @ d e f a u l t ( 0 ) 
 
     r e f u n d e d A m o u n t       I n t                       @ d e f a u l t ( 0 ) 
 
     p l a t f o r m F e e A m o u n t   I n t                     @ d e f a u l t ( 0 ) 
 
     
 
     s t a t u s                   E s c r o w S t a t u s       @ d e f a u l t ( P E N D I N G ) 
 
     
 
     / /   D e l i v e r y   c o n f i r m a t i o n 
 
     d e l i v e r y C o n f i r m e d A t         D a t e T i m e ? 
 
     d e l i v e r y C o n f i r m e d B y         S t r i n g ?               / /   " B U Y E R " ,   " O P S " 
 
     d e l i v e r y P r o o f U r l               S t r i n g ? 
 
     
 
     / /   F i n a n c e   a c t i o n s 
 
     l o c k e d A t               D a t e T i m e ? 
 
     r e l e a s e d A t           D a t e T i m e ? 
 
     r e f u n d e d A t           D a t e T i m e ? 
 
     
 
     / /   A d m i n   t r a c k i n g 
 
     r e l e a s e A p p r o v e d B y A d m i n I d   S t r i n g ? 
 
     r e l e a s e A p p r o v e d A t                 D a t e T i m e ? 
 
     r e l e a s e N o t e s                           S t r i n g ? 
 
     
 
     h o l d R e a s o n           S t r i n g ? 
 
     h o l d B y A d m i n I d     S t r i n g ? 
 
     h o l d A t                   D a t e T i m e ? 
 
     
 
     / /   A u d i t 
 
     c r e a t e d A t             D a t e T i m e               @ d e f a u l t ( n o w ( ) ) 
 
     u p d a t e d A t             D a t e T i m e               @ u p d a t e d A t 
 
     
 
     / /   R e l a t i o n s 
 
     p a y o u t s                 F i n a n c e P a y o u t [ ] 
 
     r e f u n d s                 F i n a n c e R e f u n d [ ] 
 
     
 
     @ @ i n d e x ( [ o r d e r I d ] ) 
 
     @ @ i n d e x ( [ b u y e r A c c o u n t I d ] ) 
 
     @ @ i n d e x ( [ s u p p l i e r A c c o u n t I d ] ) 
 
     @ @ i n d e x ( [ s t a t u s ] ) 
 
 } 
 
 
 
 m o d e l   F i n a n c e P a y o u t   { 
 
     i d                             S t r i n g                               @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     e s c r o w                     E s c r o w                               @ r e l a t i o n ( f i e l d s :   [ e s c r o w I d ] ,   r e f e r e n c e s :   [ i d ] ) 
 
     e s c r o w I d                 S t r i n g 
 
     
 
     o r d e r                       O r d e r                                 @ r e l a t i o n ( f i e l d s :   [ o r d e r I d ] ,   r e f e r e n c e s :   [ i d ] ) 
 
     o r d e r I d                   S t r i n g 
 
     
 
     s u p p l i e r A c c o u n t I d   S t r i n g 
 
     
 
     / /   A m o u n t s 
 
     g r o s s A m o u n t           I n t                                     / /   B e f o r e   f e e s 
 
     p l a t f o r m F e e           I n t                                     / /   F e e   d e d u c t e d 
 
     n e t A m o u n t               I n t                                     / /   A c t u a l   p a y o u t 
 
     
 
     s t a t u s                     P a y o u t A p p r o v a l S t a t u s   @ d e f a u l t ( P E N D I N G _ V E R I F I C A T I O N ) 
 
     
 
     / /   O p s   r e c o m m e n d a t i o n 
 
     o p s R e c o m m e n d a t i o n         S t r i n g ?                   / /   " R E L E A S E " ,   " H O L D " ,   " P A R T I A L " 
 
     o p s R e c o m m e n d e d B y U s e r I d   S t r i n g ? 
 
     o p s R e c o m m e n d e d A t           D a t e T i m e ? 
 
     o p s N o t e s                           S t r i n g ? 
 
     
 
     / /   F i n a n c e   d e c i s i o n   ( F I N A N C E _ A D M I N   o n l y ) 
 
     a p p r o v e d B y A d m i n I d         S t r i n g ? 
 
     a p p r o v e d A t                       D a t e T i m e ? 
 
     a p p r o v a l N o t e s                 S t r i n g ? 
 
     
 
     r e j e c t e d B y A d m i n I d         S t r i n g ? 
 
     r e j e c t e d A t                       D a t e T i m e ? 
 
     r e j e c t i o n R e a s o n             S t r i n g ? 
 
     
 
     / /   P a y o u t   e x e c u t i o n 
 
     p r o c e s s e d A t                     D a t e T i m e ? 
 
     p a y m e n t R e f e r e n c e           S t r i n g ? 
 
     p a y m e n t M e t h o d                 S t r i n g ? 
 
     
 
     / /   A u d i t 
 
     c r e a t e d A t               D a t e T i m e                           @ d e f a u l t ( n o w ( ) ) 
 
     u p d a t e d A t               D a t e T i m e                           @ u p d a t e d A t 
 
     
 
     @ @ i n d e x ( [ e s c r o w I d ] ) 
 
     @ @ i n d e x ( [ o r d e r I d ] ) 
 
     @ @ i n d e x ( [ s u p p l i e r A c c o u n t I d ] ) 
 
     @ @ i n d e x ( [ s t a t u s ] ) 
 
 } 
 
 
 
 m o d e l   F i n a n c e R e f u n d   { 
 
     i d                             S t r i n g                   @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     e s c r o w                     E s c r o w                   @ r e l a t i o n ( f i e l d s :   [ e s c r o w I d ] ,   r e f e r e n c e s :   [ i d ] ) 
 
     e s c r o w I d                 S t r i n g 
 
     
 
     o r d e r                       O r d e r                     @ r e l a t i o n ( f i e l d s :   [ o r d e r I d ] ,   r e f e r e n c e s :   [ i d ] ) 
 
     o r d e r I d                   S t r i n g 
 
     
 
     b u y e r A c c o u n t I d     S t r i n g 
 
     
 
     / /   A m o u n t s 
 
     r e q u e s t e d A m o u n t   I n t 
 
     a p p r o v e d A m o u n t     I n t ? 
 
     
 
     s t a t u s                     R e f u n d S t a t u s       @ d e f a u l t ( R E Q U E S T E D ) 
 
     
 
     r e a s o n                     S t r i n g 
 
     c a t e g o r y                 S t r i n g ?                 / /   " N O N _ D E L I V E R Y " ,   " Q U A L I T Y " ,   e t c . 
 
     
 
     / /   D i s p u t e   l i n k 
 
     d i s p u t e I d               S t r i n g ? 
 
     
 
     / /   F i n a n c e   d e c i s i o n 
 
     a p p r o v e d B y A d m i n I d         S t r i n g ? 
 
     a p p r o v e d A t                       D a t e T i m e ? 
 
     a p p r o v a l N o t e s                 S t r i n g ? 
 
     
 
     r e j e c t e d B y A d m i n I d         S t r i n g ? 
 
     r e j e c t e d A t                       D a t e T i m e ? 
 
     r e j e c t i o n R e a s o n             S t r i n g ? 
 
     
 
     / /   E x e c u t i o n 
 
     p r o c e s s e d A t                     D a t e T i m e ? 
 
     r e f u n d R e f e r e n c e             S t r i n g ? 
 
     
 
     / /   A u d i t 
 
     c r e a t e d A t               D a t e T i m e               @ d e f a u l t ( n o w ( ) ) 
 
     u p d a t e d A t               D a t e T i m e               @ u p d a t e d A t 
 
     
 
     @ @ i n d e x ( [ e s c r o w I d ] ) 
 
     @ @ i n d e x ( [ o r d e r I d ] ) 
 
     @ @ i n d e x ( [ b u y e r A c c o u n t I d ] ) 
 
     @ @ i n d e x ( [ s t a t u s ] ) 
 
 } 
 
 
 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 / /   A F F I L I A T E   M O D E   E N U M S 
 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 
 
 e n u m   A f f i l i a t e S t a t u s   { 
 
     P E N D I N G           / /   A p p l i c a t i o n   s u b m i t t e d 
 
     A C T I V E             / /   A p p r o v e d   a n d   a c t i v e 
 
     S U S P E N D E D       / /   T e m p o r a r i l y   s u s p e n d e d 
 
     B A N N E D             / /   P e r m a n e n t l y   b a n n e d 
 
 } 
 
 
 
 e n u m   A f f i l i a t e S a l e S t a t u s   { 
 
     P E N D I N G                     / /   O r d e r   p l a c e d ,   a w a i t i n g   d e l i v e r y 
 
     E S C R O W _ L O C K E D         / /   P a y m e n t   i n   e s c r o w 
 
     D E L I V E R E D                 / /   D e l i v e r y   c o n f i r m e d ,   e a r n i n g   u n l o c k e d 
 
     P A I D                           / /   C o m m i s s i o n   p a i d   t o   a f f i l i a t e 
 
     C A N C E L L E D                 / /   O r d e r   c a n c e l l e d ,   n o   c o m m i s s i o n 
 
     D I S P U T E D                   / /   U n d e r   d i s p u t e 
 
 } 
 
 
 
 e n u m   A f f i l i a t e P a y o u t S t a t u s   { 
 
     P E N D I N G                   / /   R e q u e s t e d   b y   a f f i l i a t e 
 
     P E N D I N G _ F I N A N C E   / /   A w a i t i n g   F I N A N C E _ A D M I N   a p p r o v a l 
 
     A P P R O V E D                 / /   A p p r o v e d   b y   F i n a n c e 
 
     P R O C E S S I N G             / /   B e i n g   p r o c e s s e d 
 
     C O M P L E T E D               / /   P a i d   o u t 
 
     R E J E C T E D                 / /   R e j e c t e d   b y   F i n a n c e 
 
 } 
 
 
 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 / /   A F F I L I A T E   M O D E   M O D E L S 
 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 
 
 m o d e l   A f f i l i a t e P r o f i l e   { 
 
     i d                           S t r i n g                     @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     u s e r                       U s e r                         @ r e l a t i o n ( f i e l d s :   [ u s e r I d ] ,   r e f e r e n c e s :   [ i d ] ,   o n D e l e t e :   C a s c a d e ) 
 
     u s e r I d                   S t r i n g                     @ u n i q u e 
 
     
 
     / /   P r o f i l e   i n f o 
 
     d i s p l a y N a m e         S t r i n g ? 
 
     b i o                         S t r i n g ? 
 
     w e b s i t e                 S t r i n g ? 
 
     
 
     / /   S t a t u s 
 
     s t a t u s                   A f f i l i a t e S t a t u s   @ d e f a u l t ( P E N D I N G ) 
 
     a p p r o v e d A t           D a t e T i m e ? 
 
     a p p r o v e d B y A d m i n I d   S t r i n g ? 
 
     
 
     s u s p e n d e d A t         D a t e T i m e ? 
 
     s u s p e n d R e a s o n     S t r i n g ? 
 
     s u s p e n d e d B y A d m i n I d   S t r i n g ? 
 
     
 
     / /   S t a t s   ( d e n o r m a l i z e d   f o r   p e r f o r m a n c e ) 
 
     t o t a l C l i c k s         I n t                           @ d e f a u l t ( 0 ) 
 
     t o t a l S a l e s           I n t                           @ d e f a u l t ( 0 ) 
 
     t o t a l E a r n i n g s     I n t                           @ d e f a u l t ( 0 )     / /   I n   k o b o 
 
     p e n d i n g E a r n i n g s   I n t                         @ d e f a u l t ( 0 )     / /   U n l o c k e d   b u t   n o t   w i t h d r a w n 
 
     p a i d E a r n i n g s       I n t                           @ d e f a u l t ( 0 )     / /   A l r e a d y   p a i d   o u t 
 
     
 
     / /   C o m m i s s i o n   r a t e   ( o v e r r i d e   f r o m   g l o b a l ,   n u l l   =   u s e   g l o b a l ) 
 
     c u s t o m C o m m i s s i o n R a t e   F l o a t ? 
 
     
 
     / /   R e l a t i o n s 
 
     l i n k s                     A f f i l i a t e L i n k [ ] 
 
     s a l e s                     A f f i l i a t e S a l e [ ] 
 
     p a y o u t s                 A f f i l i a t e P a y o u t [ ] 
 
     
 
     c r e a t e d A t             D a t e T i m e                 @ d e f a u l t ( n o w ( ) ) 
 
     u p d a t e d A t             D a t e T i m e                 @ u p d a t e d A t 
 
     
 
     @ @ i n d e x ( [ s t a t u s ] ) 
 
     @ @ i n d e x ( [ u s e r I d ] ) 
 
 } 
 
 
 
 m o d e l   A f f i l i a t e L i n k   { 
 
     i d                           S t r i n g                     @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     a f f i l i a t e             A f f i l i a t e P r o f i l e   @ r e l a t i o n ( f i e l d s :   [ a f f i l i a t e I d ] ,   r e f e r e n c e s :   [ i d ] ,   o n D e l e t e :   C a s c a d e ) 
 
     a f f i l i a t e I d         S t r i n g 
 
     
 
     / /   T r a c k i n g 
 
     t r a c k i n g C o d e       S t r i n g                     @ u n i q u e 
 
     
 
     / /   T a r g e t   ( w h a t   t h i s   l i n k   p o i n t s   t o ) 
 
     t a r g e t T y p e           S t r i n g                     / /   " P R O D U C T " ,   " S U P P L I E R " ,   " C A T E G O R Y " ,   " M A R K E T P L A C E " 
 
     t a r g e t I d               S t r i n g ?                   / /   P r o d u c t / S u p p l i e r / C a t e g o r y   I D   i f   a p p l i c a b l e 
 
     
 
     / /   C u s t o m   U R L   p a r a m e t e r s 
 
     c u s t o m P a r a m s       J s o n ? 
 
     n a m e                       S t r i n g ?                   / /   F r i e n d l y   n a m e   f o r   t h e   l i n k 
 
     
 
     / /   S t a t s 
 
     c l i c k s                   I n t                           @ d e f a u l t ( 0 ) 
 
     u n i q u e C l i c k s       I n t                           @ d e f a u l t ( 0 ) 
 
     s a l e s                     I n t                           @ d e f a u l t ( 0 ) 
 
     e a r n i n g s               I n t                           @ d e f a u l t ( 0 )     / /   I n   k o b o 
 
     
 
     i s A c t i v e               B o o l e a n                   @ d e f a u l t ( t r u e ) 
 
     
 
     c r e a t e d A t             D a t e T i m e                 @ d e f a u l t ( n o w ( ) ) 
 
     u p d a t e d A t             D a t e T i m e                 @ u p d a t e d A t 
 
     
 
     / /   R e l a t i o n s 
 
     a f f i l i a t e S a l e s   A f f i l i a t e S a l e [ ] 
 
     
 
     @ @ i n d e x ( [ a f f i l i a t e I d ] ) 
 
     @ @ i n d e x ( [ t r a c k i n g C o d e ] ) 
 
     @ @ i n d e x ( [ t a r g e t T y p e ,   t a r g e t I d ] ) 
 
 } 
 
 
 
 m o d e l   A f f i l i a t e S a l e   { 
 
     i d                           S t r i n g                             @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     a f f i l i a t e             A f f i l i a t e P r o f i l e         @ r e l a t i o n ( f i e l d s :   [ a f f i l i a t e I d ] ,   r e f e r e n c e s :   [ i d ] ,   o n D e l e t e :   C a s c a d e ) 
 
     a f f i l i a t e I d         S t r i n g 
 
     
 
     l i n k                       A f f i l i a t e L i n k ?             @ r e l a t i o n ( f i e l d s :   [ l i n k I d ] ,   r e f e r e n c e s :   [ i d ] ) 
 
     l i n k I d                   S t r i n g ? 
 
     
 
     / /   O r d e r   r e f e r e n c e 
 
     o r d e r I d                 S t r i n g 
 
     o r d e r A m o u n t         I n t                                   / /   O r d e r   t o t a l   i n   k o b o 
 
     
 
     / /   B u y e r   ( f o r   s e l f - r e f e r r a l   d e t e c t i o n ) 
 
     b u y e r I d                 S t r i n g 
 
     
 
     / /   C o m m i s s i o n   c a l c u l a t i o n 
 
     c o m m i s s i o n R a t e   F l o a t                               / /   R a t e   a t   t i m e   o f   s a l e   ( e . g . ,   0 . 0 5   =   5 % ) 
 
     c o m m i s s i o n A m o u n t   I n t                               / /   I n   k o b o 
 
     
 
     s t a t u s                   A f f i l i a t e S a l e S t a t u s   @ d e f a u l t ( P E N D I N G ) 
 
     
 
     / /   T i m e l i n e 
 
     o r d e r C r e a t e d A t   D a t e T i m e 
 
     d e l i v e r y C o n f i r m e d A t   D a t e T i m e ? 
 
     e a r n i n g U n l o c k e d A t   D a t e T i m e ? 
 
     p a i d A t                   D a t e T i m e ? 
 
     
 
     / /   I f   c a n c e l l e d / d i s p u t e d 
 
     c a n c e l l e d A t         D a t e T i m e ? 
 
     c a n c e l R e a s o n       S t r i n g ? 
 
     
 
     c r e a t e d A t             D a t e T i m e                         @ d e f a u l t ( n o w ( ) ) 
 
     u p d a t e d A t             D a t e T i m e                         @ u p d a t e d A t 
 
     
 
     @ @ i n d e x ( [ a f f i l i a t e I d ] ) 
 
     @ @ i n d e x ( [ o r d e r I d ] ) 
 
     @ @ i n d e x ( [ s t a t u s ] ) 
 
 } 
 
 
 
 m o d e l   A f f i l i a t e P a y o u t   { 
 
     i d                           S t r i n g                               @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     a f f i l i a t e             A f f i l i a t e P r o f i l e           @ r e l a t i o n ( f i e l d s :   [ a f f i l i a t e I d ] ,   r e f e r e n c e s :   [ i d ] ,   o n D e l e t e :   C a s c a d e ) 
 
     a f f i l i a t e I d         S t r i n g 
 
     
 
     a m o u n t                   I n t                                     / /   I n   k o b o 
 
     
 
     s t a t u s                   A f f i l i a t e P a y o u t S t a t u s   @ d e f a u l t ( P E N D I N G ) 
 
     
 
     / /   F i n a n c e   a p p r o v a l 
 
     s u b m i t t e d A t         D a t e T i m e                           @ d e f a u l t ( n o w ( ) ) 
 
     a p p r o v e d B y A d m i n I d   S t r i n g ? 
 
     a p p r o v e d A t           D a t e T i m e ? 
 
     
 
     r e j e c t e d B y A d m i n I d   S t r i n g ? 
 
     r e j e c t e d A t           D a t e T i m e ? 
 
     r e j e c t i o n R e a s o n   S t r i n g ? 
 
     
 
     / /   P a y m e n t   e x e c u t i o n 
 
     p r o c e s s e d A t         D a t e T i m e ? 
 
     p a y m e n t M e t h o d     S t r i n g ? 
 
     p a y m e n t R e f e r e n c e   S t r i n g ? 
 
     
 
     / /   A u d i t 
 
     n o t e s                     S t r i n g ? 
 
     
 
     c r e a t e d A t             D a t e T i m e                           @ d e f a u l t ( n o w ( ) ) 
 
     u p d a t e d A t             D a t e T i m e                           @ u p d a t e d A t 
 
     
 
     @ @ i n d e x ( [ a f f i l i a t e I d ] ) 
 
     @ @ i n d e x ( [ s t a t u s ] ) 
 
 } 
 
 
 
 m o d e l   A f f i l i a t e S e t t i n g s   { 
 
     i d                                 S t r i n g       @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     / /   G l o b a l   c o m m i s s i o n   r a t e   ( d e f a u l t   f o r   a l l   a f f i l i a t e s ) 
 
     d e f a u l t C o m m i s s i o n R a t e   F l o a t   @ d e f a u l t ( 0 . 0 5 )     / /   5 % 
 
     
 
     / /   C a t e g o r y - s p e c i f i c   r a t e s 
 
     c a t e g o r y R a t e s       J s o n ?         / /   {   " f a s h i o n - f a b r i c s " :   0 . 0 7 ,   " p a c k a g i n g " :   0 . 0 4   } 
 
     
 
     / /   M i n i m u m   p a y o u t 
 
     m i n i m u m P a y o u t       I n t             @ d e f a u l t ( 5 0 0 0 0 0 )     / /   â  ¦ 5 , 0 0 0   i n   k o b o 
 
     
 
     / /   S e l f - r e f e r r a l   p r o t e c t i o n 
 
     b l o c k S e l f R e f e r r a l   B o o l e a n   @ d e f a u l t ( t r u e ) 
 
     
 
     / /   C o o k i e   d u r a t i o n   ( d a y s ) 
 
     c o o k i e D u r a t i o n     I n t             @ d e f a u l t ( 3 0 ) 
 
     
 
     / /   I s   a f f i l i a t e   p r o g r a m   e n a b l e d 
 
     i s E n a b l e d               B o o l e a n     @ d e f a u l t ( t r u e ) 
 
     
 
     / /   W h o   c a n   j o i n 
 
     r e q u i r e A p p r o v a l   B o o l e a n     @ d e f a u l t ( t r u e ) 
 
     
 
     u p d a t e d A t               D a t e T i m e   @ u p d a t e d A t 
 
     u p d a t e d B y A d m i n I d   S t r i n g ? 
 
 } 
 
 
 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 / /   I N T E R N A T I O N A L   T R A D E   M O D E   E N U M S 
 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 
 
 e n u m   T r a d e M o d e   { 
 
     L O C A L                                         / /   N G   +   B D   i n t e r n a l   t r a d e 
 
     I N T E R N A T I O N A L _ B U Y _ O N L Y       / /   G l o b a l   b u y e r s ,   n o   s e l l i n g 
 
 } 
 
 
 
 e n u m   T r a d e C o u n t r y S t a t u s   { 
 
     E N A B L E D           / /   C a n   b u y   f r o m   p l a t f o r m 
 
     D I S A B L E D         / /   B l o c k e d 
 
     P E N D I N G           / /   U n d e r   r e v i e w 
 
 } 
 
 
 
 e n u m   I n t e r n a t i o n a l O r d e r S t a t u s   { 
 
     P E N D I N G _ R E V I E W             / /   A w a i t i n g   O p s   r e v i e w 
 
     D O C S _ R E Q U I R E D               / /   W a i t i n g   f o r   t r a d e   d o c u m e n t s 
 
     D O C S _ S U B M I T T E D             / /   D o c u m e n t s   u p l o a d e d 
 
     D O C S _ A P P R O V E D               / /   O p s   a p p r o v e d   d o c u m e n t s 
 
     S H I P P I N G _ A R R A N G E D       / /   S h i p p i n g   m e t h o d   s e l e c t e d 
 
     I N _ T R A N S I T                     / /   S h i p p e d ,   i n   t r a n s i t 
 
     C U S T O M S _ C L E A R A N C E       / /   A t   c u s t o m s 
 
     D E L I V E R E D                       / /   B u y e r   r e c e i v e d 
 
     C O M P L E T E D                       / /   F i n a n c e   r e l e a s e d   p a y o u t 
 
     C A N C E L L E D                       / /   C a n c e l l e d 
 
     D I S P U T E D                         / /   U n d e r   d i s p u t e 
 
 } 
 
 
 
 e n u m   T r a d e D o c u m e n t T y p e   { 
 
     C O M M E R C I A L _ I N V O I C E 
 
     P A C K I N G _ L I S T 
 
     C E R T I F I C A T E _ O F _ O R I G I N 
 
     C U S T O M S _ D E C L A R A T I O N 
 
     E X P O R T _ L I C E N S E 
 
     I M P O R T _ P E R M I T 
 
     O T H E R 
 
 } 
 
 
 
 e n u m   T r a d e D o c u m e n t S t a t u s   { 
 
     P E N D I N G 
 
     A P P R O V E D 
 
     R E J E C T E D 
 
     E X P I R E D 
 
 } 
 
 
 
 e n u m   S h i p p i n g M e t h o d   { 
 
     A I R 
 
     S E A 
 
     R O A D 
 
     C O U R I E R 
 
 } 
 
 
 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 / /   I N T E R N A T I O N A L   T R A D E   M O D E   M O D E L S 
 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 
 
 m o d e l   T r a d e C o u n t r y   { 
 
     i d                                 S t r i n g                           @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     c o d e                             S t r i n g                           @ u n i q u e     / /   I S O   3 1 6 6 - 1   a l p h a - 2   ( e . g . ,   " U S " ,   " U K " ) 
 
     n a m e                             S t r i n g 
 
     r e g i o n                         S t r i n g ?                         / /   " E U R O P E " ,   " A S I A " ,   " A M E R I C A S " ,   e t c . 
 
     
 
     s t a t u s                         T r a d e C o u n t r y S t a t u s   @ d e f a u l t ( D I S A B L E D ) 
 
     
 
     / /   T r a d e   r u l e s 
 
     a l l o w B u y N o w               B o o l e a n                         @ d e f a u l t ( t r u e ) 
 
     a l l o w R f q                     B o o l e a n                         @ d e f a u l t ( t r u e ) 
 
     r e q u i r e D o c s R e v i e w   B o o l e a n                         @ d e f a u l t ( t r u e ) 
 
     
 
     / /   A l l o w e d   c a t e g o r i e s   ( n u l l   =   a l l   a l l o w e d ) 
 
     a l l o w e d C a t e g o r i e s   S t r i n g [ ]                       @ d e f a u l t ( [ ] ) 
 
     b l o c k e d C a t e g o r i e s   S t r i n g [ ]                       @ d e f a u l t ( [ ] ) 
 
     
 
     / /   S h i p p i n g   r e q u i r e m e n t s 
 
     s h i p p i n g M e t h o d s       S h i p p i n g M e t h o d [ ]       @ d e f a u l t ( [ A I R ,   S E A ] ) 
 
     
 
     / /   B u y e r   v e r i f i c a t i o n   r e q u i r e m e n t s 
 
     r e q u i r e B l u e T i c k       B o o l e a n                         @ d e f a u l t ( f a l s e ) 
 
     h i g h V a l u e T h r e s h o l d   I n t ?                             / /   A b o v e   t h i s ,   r e q u i r e   B L U E   t i c k   ( i n   k o b o ) 
 
     
 
     / /   D o c u m e n t s   t y p i c a l l y   r e q u i r e d 
 
     r e q u i r e d D o c u m e n t s   T r a d e D o c u m e n t T y p e [ ]   @ d e f a u l t ( [ C O M M E R C I A L _ I N V O I C E ,   P A C K I N G _ L I S T ] ) 
 
     
 
     / /   F X   s e t t i n g s 
 
     d e f a u l t C u r r e n c y       S t r i n g                           @ d e f a u l t ( " U S D " ) 
 
     
 
     / /   A d m i n   t r a c k i n g 
 
     e n a b l e d A t                   D a t e T i m e ? 
 
     e n a b l e d B y A d m i n I d     S t r i n g ? 
 
     d i s a b l e d A t                 D a t e T i m e ? 
 
     d i s a b l e d B y A d m i n I d   S t r i n g ? 
 
     d i s a b l e R e a s o n           S t r i n g ? 
 
     
 
     n o t e s                           S t r i n g ? 
 
     
 
     c r e a t e d A t                   D a t e T i m e                       @ d e f a u l t ( n o w ( ) ) 
 
     u p d a t e d A t                   D a t e T i m e                       @ u p d a t e d A t 
 
     
 
     / /   R e l a t i o n s 
 
     o r d e r s                         I n t e r n a t i o n a l O r d e r [ ] 
 
     
 
     @ @ i n d e x ( [ c o d e ] ) 
 
     @ @ i n d e x ( [ s t a t u s ] ) 
 
 } 
 
 
 
 m o d e l   I n t e r n a t i o n a l O r d e r   { 
 
     i d                                 S t r i n g                                         @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     / /   L i n k   t o   m a i n   o r d e r 
 
     o r d e r                           O r d e r                                           @ r e l a t i o n ( f i e l d s :   [ o r d e r I d ] ,   r e f e r e n c e s :   [ i d ] ) 
 
     o r d e r I d                       S t r i n g                                         @ u n i q u e 
 
     
 
     / /   T r a d e   c o u n t r y 
 
     b u y e r C o u n t r y             T r a d e C o u n t r y                             @ r e l a t i o n ( f i e l d s :   [ b u y e r C o u n t r y C o d e ] ,   r e f e r e n c e s :   [ c o d e ] ) 
 
     b u y e r C o u n t r y C o d e     S t r i n g 
 
     
 
     / /   T r a d e   m o d e 
 
     t r a d e M o d e                   T r a d e M o d e                                   @ d e f a u l t ( I N T E R N A T I O N A L _ B U Y _ O N L Y ) 
 
     
 
     / /   S t a t u s 
 
     s t a t u s                         I n t e r n a t i o n a l O r d e r S t a t u s     @ d e f a u l t ( P E N D I N G _ R E V I E W ) 
 
     
 
     / /   V e r i f i c a t i o n   r e q u i r e m e n t s   m e t 
 
     s u p p l i e r G r e e n T i c k   B o o l e a n                                       @ d e f a u l t ( f a l s e ) 
 
     b u y e r B l u e T i c k           B o o l e a n                                       @ d e f a u l t ( f a l s e ) 
 
     
 
     / /   F X   s n a p s h o t   a t   o r d e r   t i m e 
 
     o r i g i n a l C u r r e n c y     S t r i n g                                         / /   B u y e r ' s   c u r r e n c y 
 
     o r i g i n a l A m o u n t         I n t                                               / /   A m o u n t   i n   b u y e r ' s   c u r r e n c y 
 
     c o n v e r t e d A m o u n t       I n t                                               / /   A m o u n t   i n   p l a t f o r m   c u r r e n c y   ( N G N ) 
 
     f x R a t e                         F l o a t                                           / /   E x c h a n g e   r a t e   u s e d 
 
     f x S n a p s h o t A t             D a t e T i m e                                     / /   W h e n   r a t e   w a s   c a p t u r e d 
 
     
 
     / /   O p s   a s s i g n m e n t 
 
     a s s i g n e d O p s I d           S t r i n g ? 
 
     a s s i g n e d A t                 D a t e T i m e ? 
 
     
 
     / /   T i m e l i n e 
 
     d o c s S u b m i t t e d A t       D a t e T i m e ? 
 
     d o c s A p p r o v e d A t         D a t e T i m e ? 
 
     d o c s A p p r o v e d B y O p s I d   S t r i n g ? 
 
     
 
     s h i p p i n g A r r a n g e d A t   D a t e T i m e ? 
 
     s h i p p e d A t                   D a t e T i m e ? 
 
     
 
     c u s t o m s C l e a r a n c e A t   D a t e T i m e ? 
 
     d e l i v e r e d A t               D a t e T i m e ? 
 
     
 
     c o m p l e t e d A t               D a t e T i m e ? 
 
     
 
     / /   N o t e s 
 
     o p s N o t e s                     S t r i n g ? 
 
     i n t e r n a l N o t e s           S t r i n g ? 
 
     
 
     c r e a t e d A t                   D a t e T i m e                                     @ d e f a u l t ( n o w ( ) ) 
 
     u p d a t e d A t                   D a t e T i m e                                     @ u p d a t e d A t 
 
     
 
     / /   R e l a t i o n s 
 
     d o c u m e n t s                   T r a d e D o c u m e n t [ ] 
 
     s h i p m e n t                     T r a d e S h i p m e n t ? 
 
     
 
     @ @ i n d e x ( [ o r d e r I d ] ) 
 
     @ @ i n d e x ( [ b u y e r C o u n t r y C o d e ] ) 
 
     @ @ i n d e x ( [ s t a t u s ] ) 
 
     @ @ i n d e x ( [ a s s i g n e d O p s I d ] ) 
 
 } 
 
 
 
 m o d e l   T r a d e D o c u m e n t   { 
 
     i d                                 S t r i n g                             @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     i n t e r n a t i o n a l O r d e r   I n t e r n a t i o n a l O r d e r   @ r e l a t i o n ( f i e l d s :   [ i n t e r n a t i o n a l O r d e r I d ] ,   r e f e r e n c e s :   [ i d ] ,   o n D e l e t e :   C a s c a d e ) 
 
     i n t e r n a t i o n a l O r d e r I d   S t r i n g 
 
     
 
     t y p e                             T r a d e D o c u m e n t T y p e 
 
     n a m e                             S t r i n g 
 
     f i l e U r l                       S t r i n g 
 
     
 
     s t a t u s                         T r a d e D o c u m e n t S t a t u s   @ d e f a u l t ( P E N D I N G ) 
 
     
 
     / /   R e v i e w 
 
     r e v i e w e d B y O p s I d       S t r i n g ? 
 
     r e v i e w e d A t                 D a t e T i m e ? 
 
     r e v i e w N o t e s               S t r i n g ? 
 
     r e j e c t i o n R e a s o n       S t r i n g ? 
 
     
 
     / /   E x p i r y   ( f o r   c e r t i f i c a t e s ) 
 
     e x p i r e s A t                   D a t e T i m e ? 
 
     
 
     / /   M e t a d a t a 
 
     m e t a d a t a                     J s o n ? 
 
     
 
     c r e a t e d A t                   D a t e T i m e                         @ d e f a u l t ( n o w ( ) ) 
 
     u p d a t e d A t                   D a t e T i m e                         @ u p d a t e d A t 
 
     
 
     @ @ i n d e x ( [ i n t e r n a t i o n a l O r d e r I d ] ) 
 
     @ @ i n d e x ( [ t y p e ] ) 
 
     @ @ i n d e x ( [ s t a t u s ] ) 
 
 } 
 
 
 
 m o d e l   T r a d e S h i p m e n t   { 
 
     i d                                 S t r i n g                             @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     i n t e r n a t i o n a l O r d e r   I n t e r n a t i o n a l O r d e r   @ r e l a t i o n ( f i e l d s :   [ i n t e r n a t i o n a l O r d e r I d ] ,   r e f e r e n c e s :   [ i d ] ,   o n D e l e t e :   C a s c a d e ) 
 
     i n t e r n a t i o n a l O r d e r I d   S t r i n g                       @ u n i q u e 
 
     
 
     / /   S h i p p i n g   d e t a i l s 
 
     m e t h o d                         S h i p p i n g M e t h o d 
 
     c a r r i e r                       S t r i n g ? 
 
     t r a c k i n g N u m b e r         S t r i n g ? 
 
     
 
     / /   T i m e l i n e 
 
     e s t i m a t e d D e p a r t u r e   D a t e T i m e ? 
 
     a c t u a l D e p a r t u r e       D a t e T i m e ? 
 
     e s t i m a t e d A r r i v a l     D a t e T i m e ? 
 
     a c t u a l A r r i v a l           D a t e T i m e ? 
 
     
 
     / /   A d d r e s s e s 
 
     o r i g i n P o r t                 S t r i n g ? 
 
     d e s t i n a t i o n P o r t       S t r i n g ? 
 
     d e l i v e r y A d d r e s s       S t r i n g 
 
     
 
     / /   C o s t s   ( i n   k o b o ) 
 
     s h i p p i n g C o s t             I n t ? 
 
     i n s u r a n c e C o s t           I n t ? 
 
     d u t i e s E s t i m a t e         I n t ? 
 
     
 
     / /   S t a t u s   u p d a t e s 
 
     c u r r e n t L o c a t i o n       S t r i n g ? 
 
     l a s t U p d a t e A t             D a t e T i m e ? 
 
     
 
     / /   N o t e s 
 
     s p e c i a l I n s t r u c t i o n s   S t r i n g ? 
 
     
 
     / /   A r r a n g e d   b y 
 
     a r r a n g e d B y O p s I d       S t r i n g ? 
 
     a r r a n g e d A t                 D a t e T i m e ? 
 
     
 
     c r e a t e d A t                   D a t e T i m e                         @ d e f a u l t ( n o w ( ) ) 
 
     u p d a t e d A t                   D a t e T i m e                         @ u p d a t e d A t 
 
     
 
     @ @ i n d e x ( [ t r a c k i n g N u m b e r ] ) 
 
 } 
 
 
 
 m o d e l   F X S n a p s h o t   { 
 
     i d                                 S t r i n g       @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     f r o m C u r r e n c y             S t r i n g       / /   e . g . ,   " U S D " 
 
     t o C u r r e n c y                 S t r i n g       / /   e . g . ,   " N G N " 
 
     r a t e                             F l o a t         / /   e . g . ,   1 5 0 0 . 0   ( 1   U S D   =   1 5 0 0   N G N ) 
 
     
 
     s o u r c e                         S t r i n g ?     / /   R a t e   s o u r c e 
 
     
 
     v a l i d F r o m                   D a t e T i m e 
 
     v a l i d U n t i l                 D a t e T i m e ? 
 
     
 
     c r e a t e d A t                   D a t e T i m e   @ d e f a u l t ( n o w ( ) ) 
 
     
 
     @ @ i n d e x ( [ f r o m C u r r e n c y ,   t o C u r r e n c y ] ) 
 
     @ @ i n d e x ( [ v a l i d F r o m ] ) 
 
 } 
 
 
 
 m o d e l   T r a d e S e t t i n g s   { 
 
     i d                                 S t r i n g       @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     / /   G l o b a l   t r a d e   s e t t i n g s 
 
     i n t e r n a t i o n a l E n a b l e d   B o o l e a n   @ d e f a u l t ( f a l s e ) 
 
     
 
     / /   D e f a u l t   r e q u i r e m e n t s 
 
     r e q u i r e G r e e n T i c k S u p p l i e r   B o o l e a n   @ d e f a u l t ( t r u e ) 
 
     d e f a u l t H i g h V a l u e T h r e s h o l d   I n t   @ d e f a u l t ( 5 0 0 0 0 0 0 0 )   / /   â  ¦ 5 0 0 , 0 0 0 
 
     
 
     / /   S u p p o r t e d   s o u r c e   c o u n t r i e s   ( w h e r e   s u p p l i e r s   a r e ) 
 
     s o u r c e C o u n t r i e s       S t r i n g [ ]   @ d e f a u l t ( [ " N G " ,   " B D " ] ) 
 
     
 
     u p d a t e d A t                   D a t e T i m e   @ u p d a t e d A t 
 
     u p d a t e d B y A d m i n I d     S t r i n g ? 
 
 } 
 
 
 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 / /   L O G I S T I C S   M O D E   E N U M S 
 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 
 
 e n u m   D e l i v e r y T y p e   { 
 
     L O C A L _ D E L I V E R Y 
 
     I N T E R N A T I O N A L _ D E L I V E R Y 
 
 } 
 
 
 
 e n u m   S h i p m e n t S t a t u s   { 
 
     P E N D I N G                       / /   S h i p m e n t   c r e a t e d ,   n o t   y e t   p i c k e d   u p 
 
     P I C K E D _ U P                   / /   C a r r i e r   h a s   p i c k e d   u p 
 
     I N _ T R A N S I T                 / /   O n   t h e   w a y 
 
     O U T _ F O R _ D E L I V E R Y     / /   F i n a l   m i l e 
 
     D E L I V E R E D                   / /   D e l i v e r e d   t o   r e c i p i e n t 
 
     F A I L E D                         / /   D e l i v e r y   f a i l e d 
 
     R E T U R N E D                     / /   R e t u r n e d   t o   s e n d e r 
 
 } 
 
 
 
 e n u m   P r o o f O f D e l i v e r y T y p e   { 
 
     P H O T O                           / /   P h o t o   o f   d e l i v e r e d   p a c k a g e 
 
     S I G N A T U R E                   / /   C u s t o m e r   s i g n a t u r e 
 
     D O C U M E N T                     / /   S i g n e d   r e c e i p t   d o c u m e n t 
 
     O T H E R 
 
 } 
 
 
 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 / /   L O G I S T I C S   M O D E   M O D E L S 
 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 
 
 m o d e l   S h i p m e n t   { 
 
     i d                                 S t r i n g                     @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     / /   L i n k   t o   o r d e r 
 
     o r d e r                           O r d e r                       @ r e l a t i o n ( f i e l d s :   [ o r d e r I d ] ,   r e f e r e n c e s :   [ i d ] ) 
 
     o r d e r I d                       S t r i n g                     @ u n i q u e 
 
     
 
     / /   D e l i v e r y   t y p e 
 
     t y p e                             D e l i v e r y T y p e         @ d e f a u l t ( L O C A L _ D E L I V E R Y ) 
 
     
 
     / /   C a r r i e r   d e t a i l s   ( P h a s e   1   =   m a n u a l   e n t r y ) 
 
     c a r r i e r N a m e               S t r i n g ? 
 
     t r a c k i n g N u m b e r         S t r i n g ? 
 
     t r a c k i n g U r l               S t r i n g ? 
 
     
 
     / /   S t a t u s 
 
     s t a t u s                         S h i p m e n t S t a t u s     @ d e f a u l t ( P E N D I N G ) 
 
     
 
     / /   T i m e l i n e 
 
     e s t i m a t e d P i c k u p       D a t e T i m e ? 
 
     a c t u a l P i c k u p             D a t e T i m e ? 
 
     e s t i m a t e d D e l i v e r y   D a t e T i m e ? 
 
     a c t u a l D e l i v e r y         D a t e T i m e ? 
 
     
 
     / /   A d d r e s s 
 
     p i c k u p A d d r e s s           S t r i n g ? 
 
     d e l i v e r y A d d r e s s       S t r i n g 
 
     
 
     / /   C o s t s 
 
     s h i p p i n g C o s t             I n t ?                         / /   I n   k o b o 
 
     i n s u r a n c e C o s t           I n t ? 
 
     
 
     / /   C o n t a c t   i n f o 
 
     r e c i p i e n t N a m e           S t r i n g ? 
 
     r e c i p i e n t P h o n e         S t r i n g ? 
 
     
 
     / /   N o t e s 
 
     s p e c i a l I n s t r u c t i o n s   S t r i n g ? 
 
     i n t e r n a l N o t e s           S t r i n g ? 
 
     
 
     / /   D e l i v e r y   c o n f i r m a t i o n 
 
     d e l i v e r y C o n f i r m e d   B o o l e a n                   @ d e f a u l t ( f a l s e ) 
 
     c o n f i r m e d B y B u y e r     B o o l e a n                   @ d e f a u l t ( f a l s e ) 
 
     c o n f i r m e d B y O p s         B o o l e a n                   @ d e f a u l t ( f a l s e ) 
 
     c o n f i r m e d A t               D a t e T i m e ? 
 
     
 
     / /   C r e a t e d / m a n a g e d   b y 
 
     c r e a t e d B y O p s I d         S t r i n g 
 
     c r e a t e d A t                   D a t e T i m e                 @ d e f a u l t ( n o w ( ) ) 
 
     u p d a t e d A t                   D a t e T i m e                 @ u p d a t e d A t 
 
     
 
     / /   R e l a t i o n s 
 
     e v e n t s                         S h i p m e n t E v e n t [ ] 
 
     p r o o f O f D e l i v e r y       P r o o f O f D e l i v e r y [ ] 
 
     
 
     @ @ i n d e x ( [ o r d e r I d ] ) 
 
     @ @ i n d e x ( [ s t a t u s ] ) 
 
     @ @ i n d e x ( [ t r a c k i n g N u m b e r ] ) 
 
 } 
 
 
 
 m o d e l   S h i p m e n t E v e n t   { 
 
     i d                                 S t r i n g                     @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     s h i p m e n t                     S h i p m e n t                 @ r e l a t i o n ( f i e l d s :   [ s h i p m e n t I d ] ,   r e f e r e n c e s :   [ i d ] ,   o n D e l e t e :   C a s c a d e ) 
 
     s h i p m e n t I d                 S t r i n g 
 
     
 
     / /   E v e n t   d e t a i l s 
 
     s t a t u s                         S h i p m e n t S t a t u s 
 
     l o c a t i o n                     S t r i n g ? 
 
     n o t e                             S t r i n g ? 
 
     
 
     / /   W h o   c r e a t e d 
 
     c r e a t e d B y U s e r I d       S t r i n g ? 
 
     c r e a t e d B y R o l e           S t r i n g ?                   / /   " O P S " ,   " S Y S T E M " ,   " C A R R I E R " 
 
     
 
     t i m e s t a m p                   D a t e T i m e                 @ d e f a u l t ( n o w ( ) ) 
 
     
 
     @ @ i n d e x ( [ s h i p m e n t I d ] ) 
 
     @ @ i n d e x ( [ t i m e s t a m p ] ) 
 
 } 
 
 
 
 m o d e l   P r o o f O f D e l i v e r y   { 
 
     i d                                 S t r i n g                             @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     s h i p m e n t                     S h i p m e n t                         @ r e l a t i o n ( f i e l d s :   [ s h i p m e n t I d ] ,   r e f e r e n c e s :   [ i d ] ,   o n D e l e t e :   C a s c a d e ) 
 
     s h i p m e n t I d                 S t r i n g 
 
     
 
     t y p e                             P r o o f O f D e l i v e r y T y p e 
 
     f i l e U r l                       S t r i n g 
 
     f i l e N a m e                     S t r i n g ? 
 
     
 
     / /   M e t a d a t a 
 
     d e s c r i p t i o n               S t r i n g ? 
 
     g e o L o c a t i o n               S t r i n g ?                           / /   L a t , L n g   i f   c a p t u r e d 
 
     c a p t u r e d A t                 D a t e T i m e ? 
 
     
 
     / /   V e r i f i c a t i o n 
 
     v e r i f i e d B y O p s I d       S t r i n g ? 
 
     v e r i f i e d A t                 D a t e T i m e ? 
 
     i s V a l i d                       B o o l e a n                           @ d e f a u l t ( f a l s e ) 
 
     r e j e c t i o n R e a s o n       S t r i n g ? 
 
     
 
     u p l o a d e d B y U s e r I d     S t r i n g 
 
     u p l o a d e d B y R o l e         S t r i n g                             / /   " C A R R I E R " ,   " O P S " ,   " S U P P L I E R " 
 
     u p l o a d e d A t                 D a t e T i m e                         @ d e f a u l t ( n o w ( ) ) 
 
     
 
     @ @ i n d e x ( [ s h i p m e n t I d ] ) 
 
 } 
 
 
 
 m o d e l   L o g i s t i c s S e t t i n g s   { 
 
     i d                                             S t r i n g       @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     / /   G l o b a l   e n a b l e / d i s a b l e 
 
     l o g i s t i c s E n a b l e d                 B o o l e a n     @ d e f a u l t ( t r u e ) 
 
     
 
     / /   D e l i v e r y   r e q u i r e m e n t s 
 
     r e q u i r e P r o o f O f D e l i v e r y     B o o l e a n     @ d e f a u l t ( t r u e ) 
 
     r e q u i r e B u y e r C o n f i r m a t i o n   B o o l e a n   @ d e f a u l t ( f a l s e )     / /   I f   t r u e ,   b u y e r   m u s t   c o n f i r m 
 
     a u t o V e r i f y A f t e r D a y s           I n t ?           / /   A u t o - v e r i f y   i f   b u y e r   d o e s n ' t   r e s p o n d   ( n u l l   =   d i s a b l e d ) 
 
     
 
     / /   D e f a u l t   c a r r i e r s 
 
     d e f a u l t L o c a l C a r r i e r           S t r i n g ? 
 
     d e f a u l t I n t l C a r r i e r             S t r i n g ? 
 
     
 
     / /   B l o c k e d   c a r r i e r s 
 
     b l o c k e d C a r r i e r s                   S t r i n g [ ]   @ d e f a u l t ( [ ] ) 
 
     
 
     u p d a t e d A t                               D a t e T i m e   @ u p d a t e d A t 
 
     u p d a t e d B y A d m i n I d                 S t r i n g ? 
 
 } 
 
 
 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 / /   G R O W T H   M O D E   E N U M S 
 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 
 
 e n u m   G r o w t h R o l e   { 
 
     G R O W T H _ A G E N T             / /   F i e l d / o n - g r o u n d   a g e n t 
 
     G R O W T H _ M A N A G E R         / /   S u p e r v i s e s   a g e n t s 
 
 } 
 
 
 
 e n u m   G r o w t h A g e n t S t a t u s   { 
 
     P E N D I N G                       / /   A w a i t i n g   a p p r o v a l 
 
     A C T I V E                         / /   C a n   o n b o a r d   s u p p l i e r s 
 
     S U S P E N D E D                   / /   T e m p o r a r i l y   b l o c k e d 
 
     T E R M I N A T E D                 / /   P e r m a n e n t l y   r e m o v e d 
 
 } 
 
 
 
 e n u m   G r o w t h E a r n i n g T y p e   { 
 
     S U P P L I E R _ O N B O A R D             / /   P e r   a c t i v e   s u p p l i e r 
 
     S U P P L I E R _ F I R S T _ O R D E R     / /   W h e n   s u p p l i e r   g e t s   f i r s t   o r d e r 
 
     O R D E R _ C O M M I S S I O N             / /   P e r   c o m p l e t e d   o r d e r 
 
     B O N U S                                   / /   M a n u a l   b o n u s 
 
 } 
 
 
 
 e n u m   G r o w t h E a r n i n g S t a t u s   { 
 
     P E N D I N G                   / /   A w a i t i n g   a c t i v i t y   t h r e s h o l d 
 
     U N L O C K E D                 / /   A c t i v i t y   m e t ,   c a n   b e   p a i d 
 
     P A I D                         / /   P a i d   o u t 
 
     R E V E R S E D                 / /   R e v e r s e d   b y   a d m i n 
 
 } 
 
 
 
 e n u m   G r o w t h P a y o u t S t a t u s   { 
 
     P E N D I N G                   / /   A w a i t i n g   F i n a n c e 
 
     P E N D I N G _ F I N A N C E   / /   S u b m i t t e d   f o r   F i n a n c e   a p p r o v a l 
 
     A P P R O V E D                 / /   A p p r o v e d   b y   F i n a n c e 
 
     P R O C E S S I N G             / /   B e i n g   p r o c e s s e d 
 
     C O M P L E T E D               / /   P a i d 
 
     R E J E C T E D                 / /   R e j e c t e d 
 
 } 
 
 
 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 / /   G R O W T H   M O D E   M O D E L S 
 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 
 
 m o d e l   G r o w t h A g e n t P r o f i l e   { 
 
     i d                                     S t r i n g                             @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     / /   L i n k   t o   u s e r 
 
     u s e r                                 U s e r                                 @ r e l a t i o n ( f i e l d s :   [ u s e r I d ] ,   r e f e r e n c e s :   [ i d ] ) 
 
     u s e r I d                             S t r i n g                             @ u n i q u e 
 
     
 
     / /   R o l e 
 
     r o l e                                 G r o w t h R o l e                     @ d e f a u l t ( G R O W T H _ A G E N T ) 
 
     s t a t u s                             G r o w t h A g e n t S t a t u s       @ d e f a u l t ( P E N D I N G ) 
 
     
 
     / /   D i s p l a y   i n f o 
 
     d i s p l a y N a m e                   S t r i n g ? 
 
     p h o n e                               S t r i n g ? 
 
     r e g i o n                             S t r i n g ?                           / /   G e o g r a p h i c   r e g i o n   a s s i g n e d 
 
     t e r r i t o r y                       S t r i n g ?                           / /   S p e c i f i c   a r e a / m a r k e t 
 
     
 
     / /   M a n a g e r   ( i f   a g e n t ) 
 
     m a n a g e r I d                       S t r i n g ? 
 
     
 
     / /   S t a t s   ( d e n o r m a l i z e d   f o r   p e r f o r m a n c e ) 
 
     t o t a l S u p p l i e r s O n b o a r d e d   I n t                           @ d e f a u l t ( 0 ) 
 
     a c t i v e S u p p l i e r s C o u n t         I n t                           @ d e f a u l t ( 0 ) 
 
     t o t a l O r d e r s G e n e r a t e d         I n t                           @ d e f a u l t ( 0 ) 
 
     t o t a l E a r n i n g s                       I n t                           @ d e f a u l t ( 0 )       / /   I n   k o b o 
 
     p e n d i n g E a r n i n g s                   I n t                           @ d e f a u l t ( 0 ) 
 
     p a i d E a r n i n g s                         I n t                           @ d e f a u l t ( 0 ) 
 
     
 
     / /   C o m m i s s i o n   r a t e   o v e r r i d e   ( n u l l   =   u s e   d e f a u l t ) 
 
     c u s t o m C o m m i s s i o n R a t e         F l o a t ? 
 
     
 
     / /   A p p r o v a l / S t a t u s   t r a c k i n g 
 
     a p p r o v e d A t                     D a t e T i m e ? 
 
     a p p r o v e d B y A d m i n I d       S t r i n g ? 
 
     s u s p e n d e d A t                   D a t e T i m e ? 
 
     s u s p e n d e d B y A d m i n I d     S t r i n g ? 
 
     s u s p e n d R e a s o n               S t r i n g ? 
 
     
 
     / /   N o t e s 
 
     i n t e r n a l N o t e s               S t r i n g ? 
 
     
 
     c r e a t e d A t                       D a t e T i m e                         @ d e f a u l t ( n o w ( ) ) 
 
     u p d a t e d A t                       D a t e T i m e                         @ u p d a t e d A t 
 
     
 
     / /   R e l a t i o n s 
 
     o n b o a r d e d S u p p l i e r s     G r o w t h S u p p l i e r [ ] 
 
     e a r n i n g s                         G r o w t h E a r n i n g [ ] 
 
     p a y o u t s                           G r o w t h P a y o u t [ ] 
 
     
 
     @ @ i n d e x ( [ u s e r I d ] ) 
 
     @ @ i n d e x ( [ s t a t u s ] ) 
 
     @ @ i n d e x ( [ m a n a g e r I d ] ) 
 
     @ @ i n d e x ( [ r e g i o n ] ) 
 
 } 
 
 
 
 m o d e l   G r o w t h S u p p l i e r   { 
 
     i d                                     S t r i n g                             @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     / /   T h e   o n b o a r d e d   s u p p l i e r 
 
     s u p p l i e r                         S u p p l i e r                         @ r e l a t i o n ( f i e l d s :   [ s u p p l i e r I d ] ,   r e f e r e n c e s :   [ i d ] ) 
 
     s u p p l i e r I d                     S t r i n g                             @ u n i q u e 
 
     
 
     / /   W h o   o n b o a r d e d   t h e m 
 
     a g e n t                               G r o w t h A g e n t P r o f i l e     @ r e l a t i o n ( f i e l d s :   [ a g e n t I d ] ,   r e f e r e n c e s :   [ i d ] ) 
 
     a g e n t I d                           S t r i n g 
 
     
 
     / /   O n b o a r d i n g   s t a t u s 
 
     o n b o a r d e d A t                   D a t e T i m e                         @ d e f a u l t ( n o w ( ) ) 
 
     a c t i v a t e d A t                   D a t e T i m e ?                       / /   W h e n   s u p p l i e r   m a d e   f i r s t   p r o d u c t   l i v e 
 
     f i r s t O r d e r A t                 D a t e T i m e ?                       / /   W h e n   s u p p l i e r   g o t   f i r s t   o r d e r 
 
     f i r s t C o m p l e t e d O r d e r A t   D a t e T i m e ?                   / /   W h e n   f i r s t   o r d e r   c o m p l e t e d 
 
     
 
     / /   A c t i v i t y   m e t r i c s   ( f o r   c o m m i s s i o n   u n l o c k ) 
 
     t o t a l P r o d u c t s               I n t                                   @ d e f a u l t ( 0 ) 
 
     t o t a l O r d e r s                   I n t                                   @ d e f a u l t ( 0 ) 
 
     c o m p l e t e d O r d e r s           I n t                                   @ d e f a u l t ( 0 ) 
 
     
 
     / /   V e r i f i c a t i o n   s t a t u s   ( f r o m   s u p p l i e r ) 
 
     v e r i f i c a t i o n L e v e l       S t r i n g ?                           / /   N O N E ,   B L U E ,   G R E E N 
 
     
 
     / /   N o t e s 
 
     o n b o a r d i n g N o t e s           S t r i n g ? 
 
     
 
     @ @ i n d e x ( [ a g e n t I d ] ) 
 
     @ @ i n d e x ( [ s u p p l i e r I d ] ) 
 
 } 
 
 
 
 m o d e l   G r o w t h E a r n i n g   { 
 
     i d                                     S t r i n g                             @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     a g e n t                               G r o w t h A g e n t P r o f i l e     @ r e l a t i o n ( f i e l d s :   [ a g e n t I d ] ,   r e f e r e n c e s :   [ i d ] ) 
 
     a g e n t I d                           S t r i n g 
 
     
 
     t y p e                                 G r o w t h E a r n i n g T y p e 
 
     a m o u n t                             I n t                                   / /   I n   k o b o 
 
     s t a t u s                             G r o w t h E a r n i n g S t a t u s   @ d e f a u l t ( P E N D I N G ) 
 
     
 
     / /   R e f e r e n c e   ( w h a t   t r i g g e r e d   t h i s   e a r n i n g ) 
 
     r e f T y p e                           S t r i n g ?                           / /   " S U P P L I E R "   /   " O R D E R " 
 
     r e f I d                               S t r i n g ?                           / /   s u p p l i e r   I D   o r   o r d e r   I D 
 
     
 
     / /   D e s c r i p t i o n 
 
     d e s c r i p t i o n                   S t r i n g ? 
 
     
 
     / /   U n l o c k   c o n d i t i o n s 
 
     u n l o c k R e q u i r e m e n t       S t r i n g ?                           / /   e . g . ,   " 3 _ C O M P L E T E D _ O R D E R S " 
 
     u n l o c k P r o g r e s s             I n t ?                                 / /   e . g . ,   2   o u t   o f   3 
 
     u n l o c k T a r g e t                 I n t ?                                 / /   e . g . ,   3 
 
     u n l o c k e d A t                     D a t e T i m e ? 
 
     
 
     / /   R e v e r s a l   ( i f   a p p l i c a b l e ) 
 
     r e v e r s e d A t                     D a t e T i m e ? 
 
     r e v e r s e d B y A d m i n I d       S t r i n g ? 
 
     r e v e r s a l R e a s o n             S t r i n g ? 
 
     
 
     c r e a t e d A t                       D a t e T i m e                         @ d e f a u l t ( n o w ( ) ) 
 
     u p d a t e d A t                       D a t e T i m e                         @ u p d a t e d A t 
 
     
 
     @ @ i n d e x ( [ a g e n t I d ] ) 
 
     @ @ i n d e x ( [ s t a t u s ] ) 
 
     @ @ i n d e x ( [ t y p e ] ) 
 
 } 
 
 
 
 m o d e l   G r o w t h P a y o u t   { 
 
     i d                                     S t r i n g                             @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     a g e n t                               G r o w t h A g e n t P r o f i l e     @ r e l a t i o n ( f i e l d s :   [ a g e n t I d ] ,   r e f e r e n c e s :   [ i d ] ) 
 
     a g e n t I d                           S t r i n g 
 
     
 
     a m o u n t                             I n t                                   / /   I n   k o b o 
 
     s t a t u s                             G r o w t h P a y o u t S t a t u s     @ d e f a u l t ( P E N D I N G ) 
 
     
 
     / /   S u b m i s s i o n 
 
     s u b m i t t e d A t                   D a t e T i m e                         @ d e f a u l t ( n o w ( ) ) 
 
     
 
     / /   F i n a n c e   r e v i e w 
 
     r e v i e w e d B y F i n a n c e I d   S t r i n g ? 
 
     r e v i e w e d A t                     D a t e T i m e ? 
 
     a p p r o v a l N o t e s               S t r i n g ? 
 
     r e j e c t i o n R e a s o n           S t r i n g ? 
 
     
 
     / /   C o m p l e t i o n 
 
     c o m p l e t e d A t                   D a t e T i m e ? 
 
     p a y m e n t R e f e r e n c e         S t r i n g ? 
 
     
 
     c r e a t e d A t                       D a t e T i m e                         @ d e f a u l t ( n o w ( ) ) 
 
     u p d a t e d A t                       D a t e T i m e                         @ u p d a t e d A t 
 
     
 
     @ @ i n d e x ( [ a g e n t I d ] ) 
 
     @ @ i n d e x ( [ s t a t u s ] ) 
 
 } 
 
 
 
 m o d e l   G r o w t h S e t t i n g s   { 
 
     i d                                                     S t r i n g       @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     / /   G l o b a l   e n a b l e / d i s a b l e 
 
     g r o w t h M o d e E n a b l e d                       B o o l e a n     @ d e f a u l t ( t r u e ) 
 
     
 
     / /   C o m m i s s i o n   r a t e s 
 
     s u p p l i e r O n b o a r d C o m m i s s i o n       I n t             @ d e f a u l t ( 5 0 0 0 0 )       / /   â  ¦ 5 0 0   p e r   a c t i v e   s u p p l i e r 
 
     f i r s t O r d e r C o m m i s s i o n                 I n t             @ d e f a u l t ( 1 0 0 0 0 0 )     / /   â  ¦ 1 0 0 0   w h e n   s u p p l i e r   g e t s   f i r s t   o r d e r 
 
     o r d e r C o m m i s s i o n R a t e                   F l o a t         @ d e f a u l t ( 0 . 0 0 5 )       / /   0 . 5 %   p e r   c o m p l e t e d   o r d e r 
 
     
 
     / /   U n l o c k   r e q u i r e m e n t s 
 
     o r d e r s R e q u i r e d T o U n l o c k             I n t             @ d e f a u l t ( 1 )               / /   O r d e r s   n e e d e d   t o   u n l o c k   o n b o a r d   c o m m i s s i o n 
 
     
 
     / /   P a y o u t   s e t t i n g s 
 
     m i n i m u m P a y o u t                               I n t             @ d e f a u l t ( 5 0 0 0 0 0 )     / /   â  ¦ 5 , 0 0 0   m i n i m u m 
 
     
 
     / /   F r a u d   c o n t r o l s 
 
     b l o c k S e l f O n b o a r d                         B o o l e a n     @ d e f a u l t ( t r u e )         / /   A g e n t   c a n ' t   o n b o a r d   s e l f 
 
     
 
     u p d a t e d A t                                       D a t e T i m e   @ u p d a t e d A t 
 
     u p d a t e d B y A d m i n I d                         S t r i n g ? 
 
 } 
 
 
 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 / /   A N A L Y T I C S   &   A I   M O D E   E N U M S 
 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 
 
 e n u m   S n a p s h o t P e r i o d   { 
 
     D A I L Y 
 
     W E E K L Y 
 
     M O N T H L Y 
 
 } 
 
 
 
 e n u m   I n s i g h t S t a t u s   { 
 
     A C T I V E                 / /   C u r r e n t l y   r e l e v a n t 
 
     A C K N O W L E D G E D     / /   A d m i n   h a s   s e e n   i t 
 
     D I S M I S S E D           / /   A d m i n   c h o s e   t o   i g n o r e 
 
     A C T E D _ U P O N         / /   A d m i n   t o o k   a c t i o n 
 
     E X P I R E D               / /   N o   l o n g e r   r e l e v a n t 
 
 } 
 
 
 
 e n u m   I n s i g h t P r i o r i t y   { 
 
     L O W 
 
     M E D I U M 
 
     H I G H 
 
     C R I T I C A L 
 
 } 
 
 
 
 e n u m   A I A g e n t T y p e   { 
 
     M A R K E T _ A I 
 
     S U P P L I E R _ A I 
 
     B U Y E R _ A I 
 
     O P S _ A I 
 
     P R I C I N G _ A I 
 
     F I N A N C E _ A I 
 
 } 
 
 
 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 / /   A N A L Y T I C S   D A T A   M O D E L S 
 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 
 
 m o d e l   A n a l y t i c s S n a p s h o t   { 
 
     i d                             S t r i n g                     @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     p e r i o d                     S n a p s h o t P e r i o d 
 
     p e r i o d S t a r t           D a t e T i m e 
 
     p e r i o d E n d               D a t e T i m e 
 
     
 
     / /   M a r k e t   m e t r i c s 
 
     t o t a l R f q s               I n t                           @ d e f a u l t ( 0 ) 
 
     t o t a l O r d e r s           I n t                           @ d e f a u l t ( 0 ) 
 
     t o t a l G m v                 I n t                           @ d e f a u l t ( 0 )       / /   G r o s s   M e r c h a n d i s e   V a l u e   i n   k o b o 
 
     t o t a l P l a t f o r m R e v e n u e   I n t                 @ d e f a u l t ( 0 ) 
 
     
 
     / /   C a t e g o r y   b r e a k d o w n   ( J S O N ) 
 
     c a t e g o r y M e t r i c s   J s o n ?                       / /   {   " t e x t i l e s " :   {   r f q s :   1 0 ,   o r d e r s :   5 ,   g m v :   1 0 0 0 0 0   }   } 
 
     
 
     / /   C o u n t r y   b r e a k d o w n 
 
     n i g e r i a G m v             I n t                           @ d e f a u l t ( 0 ) 
 
     b a n g l a d e s h G m v       I n t                           @ d e f a u l t ( 0 ) 
 
     i n t e r n a t i o n a l G m v   I n t                         @ d e f a u l t ( 0 ) 
 
     
 
     / /   O r d e r   b r e a k d o w n 
 
     b u y N o w O r d e r s         I n t                           @ d e f a u l t ( 0 ) 
 
     r f q O r d e r s               I n t                           @ d e f a u l t ( 0 ) 
 
     
 
     / /   U s e r   m e t r i c s 
 
     n e w S u p p l i e r s         I n t                           @ d e f a u l t ( 0 ) 
 
     n e w B u y e r s               I n t                           @ d e f a u l t ( 0 ) 
 
     a c t i v e S u p p l i e r s   I n t                           @ d e f a u l t ( 0 ) 
 
     a c t i v e B u y e r s         I n t                           @ d e f a u l t ( 0 ) 
 
     
 
     / /   C o n v e r s i o n 
 
     r f q T o O r d e r R a t e     F l o a t ? 
 
     a v g O r d e r V a l u e       I n t ? 
 
     
 
     c r e a t e d A t               D a t e T i m e                 @ d e f a u l t ( n o w ( ) ) 
 
     
 
     @ @ u n i q u e ( [ p e r i o d ,   p e r i o d S t a r t ] ) 
 
     @ @ i n d e x ( [ p e r i o d ] ) 
 
     @ @ i n d e x ( [ p e r i o d S t a r t ] ) 
 
 } 
 
 
 
 m o d e l   S u p p l i e r S c o r e   { 
 
     i d                                     S t r i n g         @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     s u p p l i e r I d                     S t r i n g         @ u n i q u e 
 
     
 
     / /   P e r f o r m a n c e   s c o r e s   ( 0 - 1 0 0 ) 
 
     o v e r a l l S c o r e                 I n t               @ d e f a u l t ( 5 0 ) 
 
     r e s p o n s e T i m e S c o r e       I n t               @ d e f a u l t ( 5 0 )       / /   H o w   f a s t   t h e y   r e s p o n d   t o   R F Q s 
 
     f u l f i l l m e n t S c o r e         I n t               @ d e f a u l t ( 5 0 )       / /   O r d e r   c o m p l e t i o n   r a t e 
 
     q u a l i t y S c o r e                 I n t               @ d e f a u l t ( 5 0 )       / /   B a s e d   o n   r e v i e w s / d i s p u t e s 
 
     r e l i a b i l i t y S c o r e         I n t               @ d e f a u l t ( 5 0 )       / /   O n - t i m e   d e l i v e r y 
 
     
 
     / /   R a w   m e t r i c s 
 
     a v g R e s p o n s e T i m e H o u r s   F l o a t ? 
 
     t o t a l O r d e r s                   I n t               @ d e f a u l t ( 0 ) 
 
     c o m p l e t e d O r d e r s           I n t               @ d e f a u l t ( 0 ) 
 
     c a n c e l l e d O r d e r s           I n t               @ d e f a u l t ( 0 ) 
 
     d i s p u t e R a t e                   F l o a t ? 
 
     t o t a l R e v e n u e                 I n t               @ d e f a u l t ( 0 ) 
 
     
 
     / /   F l a g s 
 
     i s H i g h R i s k                     B o o l e a n       @ d e f a u l t ( f a l s e ) 
 
     i s T o p P e r f o r m e r             B o o l e a n       @ d e f a u l t ( f a l s e ) 
 
     r i s k R e a s o n s                   S t r i n g [ ]     @ d e f a u l t ( [ ] ) 
 
     
 
     l a s t C a l c u l a t e d A t         D a t e T i m e     @ d e f a u l t ( n o w ( ) ) 
 
     
 
     @ @ i n d e x ( [ o v e r a l l S c o r e ] ) 
 
     @ @ i n d e x ( [ i s H i g h R i s k ] ) 
 
     @ @ i n d e x ( [ i s T o p P e r f o r m e r ] ) 
 
 } 
 
 
 
 m o d e l   B u y e r S c o r e   { 
 
     i d                                     S t r i n g         @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     b u y e r I d                           S t r i n g         @ u n i q u e 
 
     
 
     / /   B e h a v i o r   s c o r e s   ( 0 - 1 0 0 ) 
 
     o v e r a l l S c o r e                 I n t               @ d e f a u l t ( 5 0 ) 
 
     e n g a g e m e n t S c o r e           I n t               @ d e f a u l t ( 5 0 ) 
 
     c o n v e r s i o n S c o r e           I n t               @ d e f a u l t ( 5 0 ) 
 
     v a l u e S c o r e                     I n t               @ d e f a u l t ( 5 0 ) 
 
     
 
     / /   R a w   m e t r i c s 
 
     t o t a l R f q s                       I n t               @ d e f a u l t ( 0 ) 
 
     c o n v e r t e d R f q s               I n t               @ d e f a u l t ( 0 ) 
 
     a b a n d o n e d R f q s               I n t               @ d e f a u l t ( 0 ) 
 
     t o t a l O r d e r s                   I n t               @ d e f a u l t ( 0 ) 
 
     t o t a l S p e n t                     I n t               @ d e f a u l t ( 0 ) 
 
     a v g O r d e r V a l u e               I n t ? 
 
     
 
     / /   F l a g s 
 
     i s H i g h V a l u e                   B o o l e a n       @ d e f a u l t ( f a l s e ) 
 
     i s A t R i s k                         B o o l e a n       @ d e f a u l t ( f a l s e )     / /   M i g h t   c h u r n 
 
     
 
     l a s t C a l c u l a t e d A t         D a t e T i m e     @ d e f a u l t ( n o w ( ) ) 
 
     
 
     @ @ i n d e x ( [ o v e r a l l S c o r e ] ) 
 
     @ @ i n d e x ( [ i s H i g h V a l u e ] ) 
 
 } 
 
 
 
 m o d e l   O p s M e t r i c   { 
 
     i d                                     S t r i n g                     @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     p e r i o d                             S n a p s h o t P e r i o d 
 
     p e r i o d S t a r t                   D a t e T i m e 
 
     
 
     / /   R F Q   m e t r i c s 
 
     a v g R f q R e s p o n s e T i m e H o u r s   F l o a t ? 
 
     r f q s A s s i g n e d                 I n t                           @ d e f a u l t ( 0 ) 
 
     r f q s C o m p l e t e d               I n t                           @ d e f a u l t ( 0 ) 
 
     
 
     / /   O r d e r   m e t r i c s 
 
     a v g O r d e r P r o c e s s i n g H o u r s   F l o a t ? 
 
     o r d e r s P r o c e s s e d           I n t                           @ d e f a u l t ( 0 ) 
 
     o r d e r s D e l a y e d               I n t                           @ d e f a u l t ( 0 ) 
 
     
 
     / /   D e l i v e r y 
 
     a v g D e l i v e r y T i m e H o u r s   F l o a t ? 
 
     d e l i v e r i e s O n T i m e         I n t                           @ d e f a u l t ( 0 ) 
 
     d e l i v e r i e s L a t e             I n t                           @ d e f a u l t ( 0 ) 
 
     
 
     / /   C h a t 
 
     a v g C h a t R e s p o n s e T i m e M i n u t e s   F l o a t ? 
 
     t o t a l C h a t s H a n d l e d       I n t                           @ d e f a u l t ( 0 ) 
 
     
 
     / /   P e r - o p s   u s e r   b r e a k d o w n   ( J S O N ) 
 
     o p s U s e r M e t r i c s             J s o n ? 
 
     
 
     c r e a t e d A t                       D a t e T i m e                 @ d e f a u l t ( n o w ( ) ) 
 
     
 
     @ @ u n i q u e ( [ p e r i o d ,   p e r i o d S t a r t ] ) 
 
     @ @ i n d e x ( [ p e r i o d ] ) 
 
 } 
 
 
 
 m o d e l   F i n a n c e M e t r i c   { 
 
     i d                                     S t r i n g                     @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     p e r i o d                             S n a p s h o t P e r i o d 
 
     p e r i o d S t a r t                   D a t e T i m e 
 
     
 
     / /   E s c r o w 
 
     e s c r o w L o c k e d                 I n t                           @ d e f a u l t ( 0 ) 
 
     e s c r o w R e l e a s e d             I n t                           @ d e f a u l t ( 0 ) 
 
     e s c r o w B a l a n c e               I n t                           @ d e f a u l t ( 0 ) 
 
     
 
     / /   R e v e n u e 
 
     p l a t f o r m F e e s                 I n t                           @ d e f a u l t ( 0 ) 
 
     a f f i l i a t e P a y o u t s         I n t                           @ d e f a u l t ( 0 ) 
 
     g r o w t h P a y o u t s               I n t                           @ d e f a u l t ( 0 ) 
 
     s u p p l i e r P a y o u t s           I n t                           @ d e f a u l t ( 0 ) 
 
     
 
     / /   D i s p u t e s 
 
     r e f u n d s I s s u e d               I n t                           @ d e f a u l t ( 0 ) 
 
     r e f u n d C o u n t                   I n t                           @ d e f a u l t ( 0 ) 
 
     d i s p u t e s O p e n e d             I n t                           @ d e f a u l t ( 0 ) 
 
     d i s p u t e s R e s o l v e d         I n t                           @ d e f a u l t ( 0 ) 
 
     
 
     / /   B y   c a t e g o r y / c o u n t r y   ( J S O N ) 
 
     r e v e n u e B y C a t e g o r y       J s o n ? 
 
     r e v e n u e B y C o u n t r y         J s o n ? 
 
     
 
     c r e a t e d A t                       D a t e T i m e                 @ d e f a u l t ( n o w ( ) ) 
 
     
 
     @ @ u n i q u e ( [ p e r i o d ,   p e r i o d S t a r t ] ) 
 
     @ @ i n d e x ( [ p e r i o d ] ) 
 
 } 
 
 
 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 / /   A I   I N S I G H T S   M O D E L 
 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 
 
 m o d e l   A I I n s i g h t   { 
 
     i d                                     S t r i n g                     @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     / /   W h a t   g e n e r a t e d   t h i s 
 
     a g e n t T y p e                       A I A g e n t T y p e 
 
     
 
     / /   I n s i g h t   d e t a i l s 
 
     t i t l e                               S t r i n g 
 
     d e s c r i p t i o n                   S t r i n g 
 
     p r i o r i t y                         I n s i g h t P r i o r i t y   @ d e f a u l t ( M E D I U M ) 
 
     s t a t u s                             I n s i g h t S t a t u s       @ d e f a u l t ( A C T I V E ) 
 
     
 
     / /   T a r g e t   ( o p t i o n a l ) 
 
     t a r g e t T y p e                     S t r i n g ?                   / /   " S U P P L I E R " ,   " B U Y E R " ,   " C A T E G O R Y " ,   " O P S " 
 
     t a r g e t I d                         S t r i n g ? 
 
     
 
     / /   S u g g e s t e d   a c t i o n 
 
     s u g g e s t e d A c t i o n           S t r i n g ? 
 
     a c t i o n D a t a                     J s o n ?                       / /   D a t a   n e e d e d   i f   a c t i o n   i s   t a k e n 
 
     
 
     / /   W h o   c a n   s e e   t h i s 
 
     v i s i b l e T o R o l e s             S t r i n g [ ]                 @ d e f a u l t ( [ " A D M I N " ] ) 
 
     
 
     / /   T r a c k i n g 
 
     a c k n o w l e d g e d B y U s e r I d   S t r i n g ? 
 
     a c k n o w l e d g e d A t             D a t e T i m e ? 
 
     d i s m i s s e d B y U s e r I d       S t r i n g ? 
 
     d i s m i s s e d A t                   D a t e T i m e ? 
 
     a c t e d U p o n B y U s e r I d       S t r i n g ? 
 
     a c t e d U p o n A t                   D a t e T i m e ? 
 
     
 
     / /   C o n t e x t   d a t a 
 
     c o n t e x t D a t a                   J s o n ?                       / /   S u p p o r t i n g   d a t a / c h a r t s 
 
     
 
     e x p i r e s A t                       D a t e T i m e ? 
 
     c r e a t e d A t                       D a t e T i m e                 @ d e f a u l t ( n o w ( ) ) 
 
     
 
     @ @ i n d e x ( [ a g e n t T y p e ] ) 
 
     @ @ i n d e x ( [ s t a t u s ] ) 
 
     @ @ i n d e x ( [ p r i o r i t y ] ) 
 
     @ @ i n d e x ( [ v i s i b l e T o R o l e s ] ) 
 
 } 
 
 
 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 / /   F A C T O R I E S   M O D E   E N U M S 
 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 
 
 e n u m   P r o d u c t i o n S t a t u s   { 
 
     N O T _ S T A R T E D             / /   O r d e r   c o n f i r m e d ,   a w a i t i n g   p r o d u c t i o n 
 
     I N _ P R O D U C T I O N         / /   M a n u f a c t u r i n g   i n   p r o g r e s s 
 
     Q U A L I T Y _ C H E C K         / /   Q u a l i t y   i n s p e c t i o n 
 
     R E A D Y _ T O _ S H I P         / /   R e a d y   f o r   p i c k u p 
 
     S H I P P E D                     / /   H a n d e d   t o   c a r r i e r 
 
 } 
 
 
 
 e n u m   F a c t o r y V e r i f i c a t i o n S t a t u s   { 
 
     P E N D I N G                       / /   A w a i t i n g   v e r i f i c a t i o n 
 
     U N D E R _ R E V I E W             / /   D o c s   b e i n g   r e v i e w e d 
 
     V E R I F I E D                     / /   G r e e n   t i c k   g r a n t e d 
 
     S U S P E N D E D                   / /   T e m p o r a r i l y   b l o c k e d 
 
     R E J E C T E D                     / /   V e r i f i c a t i o n   d e n i e d 
 
 } 
 
 
 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 / /   F A C T O R Y   D A T A   M O D E L S 
 
 / /   = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 
 
 m o d e l   F a c t o r y P r o f i l e   { 
 
     i d                                             S t r i n g                                         @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     / /   L i n k   t o   s u p p l i e r   ( C O M P A N Y _ F A C T O R Y   t y p e ) 
 
     s u p p l i e r                                 S u p p l i e r                                     @ r e l a t i o n ( f i e l d s :   [ s u p p l i e r I d ] ,   r e f e r e n c e s :   [ i d ] ) 
 
     s u p p l i e r I d                             S t r i n g                                         @ u n i q u e 
 
     
 
     / /   F a c t o r y - s p e c i f i c   i n f o 
 
     f a c t o r y N a m e                           S t r i n g 
 
     f a c t o r y T y p e                           S t r i n g ?                                       / /   e . g . ,   " G a r m e n t s " ,   " T e x t i l e s " ,   " P a c k a g i n g " 
 
     y e a r E s t a b l i s h e d                   I n t ? 
 
     
 
     / /   L o c a t i o n   ( p r i m a r i l y   B a n g l a d e s h ) 
 
     c o u n t r y                                   S t r i n g                                         @ d e f a u l t ( " B D " )     / /   B D   =   B a n g l a d e s h 
 
     c i t y                                         S t r i n g ? 
 
     a d d r e s s                                   S t r i n g ? 
 
     
 
     / /   P r o d u c t i o n   c a p a b i l i t i e s 
 
     m o n t h l y C a p a c i t y U n i t s         I n t ?                                             / /   M a x   m o n t h l y   p r o d u c t i o n 
 
     m i n O r d e r Q u a n t i t y                 I n t ?                                             / /   D e f a u l t   M O Q 
 
     s t a n d a r d L e a d T i m e D a y s         I n t ?                                             / /   D e f a u l t   l e a d   t i m e 
 
     
 
     / /   C e r t i f i c a t i o n s   &   c o m p l i a n c e 
 
     h a s C e r t i f i c a t i o n s               B o o l e a n                                       @ d e f a u l t ( f a l s e ) 
 
     c e r t i f i c a t i o n s                     S t r i n g [ ]                                     @ d e f a u l t ( [ ] ) 
 
     
 
     / /   V e r i f i c a t i o n 
 
     v e r i f i c a t i o n S t a t u s             F a c t o r y V e r i f i c a t i o n S t a t u s   @ d e f a u l t ( P E N D I N G ) 
 
     h a s G r e e n T i c k                         B o o l e a n                                       @ d e f a u l t ( f a l s e ) 
 
     v e r i f i e d A t                             D a t e T i m e ? 
 
     v e r i f i e d B y A d m i n I d               S t r i n g ? 
 
     
 
     / /   T r a d e   r e s t r i c t i o n s 
 
     e n a b l e d F o r I n t e r n a t i o n a l   B o o l e a n                                       @ d e f a u l t ( f a l s e ) 
 
     e n a b l e d F o r B u y N o w                 B o o l e a n                                       @ d e f a u l t ( f a l s e )     / /   S a m p l e s   o n l y 
 
     
 
     / /   A d m i n   n o t e s 
 
     a d m i n N o t e s                             S t r i n g ? 
 
     
 
     c r e a t e d A t                               D a t e T i m e                                     @ d e f a u l t ( n o w ( ) ) 
 
     u p d a t e d A t                               D a t e T i m e                                     @ u p d a t e d A t 
 
     
 
     / /   R e l a t i o n s 
 
     c a p a b i l i t i e s                         F a c t o r y C a p a b i l i t y [ ] 
 
     c o m p l i a n c e D o c s                     F a c t o r y C o m p l i a n c e D o c [ ] 
 
     p r o d u c t i o n s                           F a c t o r y P r o d u c t i o n [ ] 
 
     
 
     @ @ i n d e x ( [ s u p p l i e r I d ] ) 
 
     @ @ i n d e x ( [ c o u n t r y ] ) 
 
     @ @ i n d e x ( [ h a s G r e e n T i c k ] ) 
 
     @ @ i n d e x ( [ v e r i f i c a t i o n S t a t u s ] ) 
 
 } 
 
 
 
 m o d e l   F a c t o r y C a p a b i l i t y   { 
 
     i d                                     S t r i n g                     @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     f a c t o r y                           F a c t o r y P r o f i l e     @ r e l a t i o n ( f i e l d s :   [ f a c t o r y I d ] ,   r e f e r e n c e s :   [ i d ] ) 
 
     f a c t o r y I d                       S t r i n g 
 
     
 
     / /   C a p a b i l i t y   d e t a i l s 
 
     c a t e g o r y S l u g                 S t r i n g                     / /   e . g . ,   " t - s h i r t s " ,   " p a c k a g i n g - b o x e s " 
 
     c a t e g o r y N a m e                 S t r i n g 
 
     
 
     / /   P r o d u c t i o n   s p e c s 
 
     m i n O r d e r Q u a n t i t y         I n t                           / /   C a t e g o r y - s p e c i f i c   M O Q 
 
     m a x O r d e r Q u a n t i t y         I n t ? 
 
     l e a d T i m e D a y s                 I n t                           / /   D a y s   t o   p r o d u c e 
 
     
 
     / /   P r i c i n g   ( i n d i c a t i v e ) 
 
     p r i c e P e r U n i t M i n           I n t ?                         / /   I n   k o b o ,   m i n i m u m   p r i c e 
 
     p r i c e P e r U n i t M a x           I n t ?                         / /   I n   k o b o ,   m a x i m u m   p r i c e 
 
     
 
     / /   N o t e s 
 
     n o t e s                               S t r i n g ? 
 
     
 
     i s A c t i v e                         B o o l e a n                   @ d e f a u l t ( t r u e ) 
 
     
 
     c r e a t e d A t                       D a t e T i m e                 @ d e f a u l t ( n o w ( ) ) 
 
     u p d a t e d A t                       D a t e T i m e                 @ u p d a t e d A t 
 
     
 
     @ @ u n i q u e ( [ f a c t o r y I d ,   c a t e g o r y S l u g ] ) 
 
     @ @ i n d e x ( [ f a c t o r y I d ] ) 
 
     @ @ i n d e x ( [ c a t e g o r y S l u g ] ) 
 
 } 
 
 
 
 m o d e l   F a c t o r y C o m p l i a n c e D o c   { 
 
     i d                                     S t r i n g                     @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     f a c t o r y                           F a c t o r y P r o f i l e     @ r e l a t i o n ( f i e l d s :   [ f a c t o r y I d ] ,   r e f e r e n c e s :   [ i d ] ) 
 
     f a c t o r y I d                       S t r i n g 
 
     
 
     / /   D o c u m e n t   d e t a i l s 
 
     d o c T y p e                           S t r i n g                     / /   e . g . ,   " T R A D E _ L I C E N S E " ,   " I S O _ C E R T " ,   " F I R E _ S A F E T Y " 
 
     d o c N a m e                           S t r i n g 
 
     f i l e U r l                           S t r i n g 
 
     
 
     / /   V e r i f i c a t i o n 
 
     i s V e r i f i e d                     B o o l e a n                   @ d e f a u l t ( f a l s e ) 
 
     v e r i f i e d B y A d m i n I d       S t r i n g ? 
 
     v e r i f i e d A t                     D a t e T i m e ? 
 
     r e j e c t i o n R e a s o n           S t r i n g ? 
 
     
 
     e x p i r y D a t e                     D a t e T i m e ? 
 
     
 
     u p l o a d e d A t                     D a t e T i m e                 @ d e f a u l t ( n o w ( ) ) 
 
     
 
     @ @ i n d e x ( [ f a c t o r y I d ] ) 
 
     @ @ i n d e x ( [ d o c T y p e ] ) 
 
 } 
 
 
 
 m o d e l   F a c t o r y P r o d u c t i o n   { 
 
     i d                                     S t r i n g                       @ i d   @ d e f a u l t ( c u i d ( ) ) 
 
     
 
     / /   L i n k   t o   o r d e r 
 
     o r d e r                               O r d e r                         @ r e l a t i o n ( f i e l d s :   [ o r d e r I d ] ,   r e f e r e n c e s :   [ i d ] ) 
 
     o r d e r I d                           S t r i n g                       @ u n i q u e 
 
     
 
     / /   L i n k   t o   f a c t o r y 
 
     f a c t o r y                           F a c t o r y P r o f i l e       @ r e l a t i o n ( f i e l d s :   [ f a c t o r y I d ] ,   r e f e r e n c e s :   [ i d ] ) 
 
     f a c t o r y I d                       S t r i n g 
 
     
 
     / /   P r o d u c t i o n   s t a t u s 
 
     s t a t u s                             P r o d u c t i o n S t a t u s   @ d e f a u l t ( N O T _ S T A R T E D ) 
 
     
 
     / /   T i m e l i n e 
 
     e x p e c t e d S t a r t D a t e       D a t e T i m e ? 
 
     a c t u a l S t a r t D a t e           D a t e T i m e ? 
 
     e x p e c t e d E n d D a t e           D a t e T i m e ? 
 
     a c t u a l E n d D a t e               D a t e T i m e ? 
 
     
 
     / /   Q u a n t i t y 
 
     o r d e r e d Q u a n t i t y           I n t 
 
     p r o d u c e d Q u a n t i t y         I n t                             @ d e f a u l t ( 0 ) 
 
     d e f e c t Q u a n t i t y             I n t                             @ d e f a u l t ( 0 ) 
 
     
 
     / /   U p d a t e s   ( J S O N   a r r a y   o f   s t a t u s   u p d a t e s ) 
 
     u p d a t e s                           J s o n ?                         / /   [ {   s t a t u s ,   n o t e ,   t i m e s t a m p ,   u p d a t e d B y   } ] 
 
     
 
     / /   P h o t o s   ( p r o d u c t i o n   p r o g r e s s ) 
 
     p r o g r e s s P h o t o s             S t r i n g [ ]                   @ d e f a u l t ( [ ] ) 
 
     
 
     / /   Q u a l i t y   c h e c k 
 
     q c P a s s e d                         B o o l e a n ? 
 
     q c N o t e s                           S t r i n g ? 
 
     q c D a t e                             D a t e T i m e ? 
 
     
 
     / /   H a n d o f f 
 
     r e a d y F o r P i c k u p A t         D a t e T i m e ? 
 
     s h i p p e d A t                       D a t e T i m e ? 
 
     
 
     c r e a t e d A t                       D a t e T i m e                   @ d e f a u l t ( n o w ( ) ) 
 
     u p d a t e d A t                       D a t e T i m e                   @ u p d a t e d A t 
 
     
 
     @ @ i n d e x ( [ o r d e r I d ] ) 
 
     @ @ i n d e x ( [ f a c t o r y I d ] ) 
 
     @ @ i n d e x ( [ s t a t u s ] ) 
 
 } 
 
 
